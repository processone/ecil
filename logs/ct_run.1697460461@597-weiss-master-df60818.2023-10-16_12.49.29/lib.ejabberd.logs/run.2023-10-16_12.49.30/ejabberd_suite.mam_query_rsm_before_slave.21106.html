<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Test ejabberd_SUITE:mam_query_rsm_before_slave result</title>
<meta http-equiv="cache-control" content="no-cache"></meta>
<meta http-equiv="content-type" content="text/html; charset=utf-8"></meta>
<link rel="stylesheet" href="../../ct_default.css" type="text/css"></link>
<script type="text/javascript" src="../../jquery-latest.js"></script>
<script type="text/javascript" src="../../jquery.tablesorter.min.js"></script>
</head>
<body>

<a name="top"></a><pre>
=== Test case: <a href="ejabberd_suite.src.html#mam_query_rsm_before_slave-1">ejabberd_SUITE:mam_query_rsm_before_slave/1</a> (click for source code)

=== Config value:

    [{event_relay,&lt;0.38199.0&gt;},
     {watchdog,&lt;0.38198.0&gt;},
     {server,&lt;&lt;"redis.localhost"&gt;&gt;},
     {server_port,5222},
     {server_host,"localhost"},
     {component_port,5270},
     {s2s_port,5269},
     {user,&lt;&lt;"test_single!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;},
     {nick,&lt;&lt;"nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {master_nick,&lt;&lt;"master_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {slave_nick,&lt;&lt;"slave_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {room_subject,&lt;&lt;"hello, world!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {certfile,"/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd/test/ejabberd_SUITE_data/cert.pem"},
     {persistent_room,true},
     {anonymous,false},
     {type,client},
     {xmlns,&lt;&lt;"jabber:client"&gt;&gt;},
     {ns_stream,&lt;&lt;"http://etherx.jabber.org/streams"&gt;&gt;},
     {stream_version,{1,0}},
     {stream_id,&lt;&lt;&gt;&gt;},
     {stream_from,&lt;&lt;&gt;&gt;},
     {db_xmlns,&lt;&lt;&gt;&gt;},
     {mechs,[]},
     {rosterver,false},
     {lang,&lt;&lt;"en"&gt;&gt;},
     {base_dir,"/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd"},
     {receiver,undefined},
     {pubsub_node,&lt;&lt;"node!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {pubsub_node_title,&lt;&lt;"title!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {resource,&lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {master_resource,&lt;&lt;"master_resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {slave_resource,&lt;&lt;"slave_resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {update_sql,false},
     {password,&lt;&lt;"password!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {backends,[mnesia,redis,mysql,pgsql,sqlite,ldap,extauth]},
     {tc_logfile,"/home/runner/work/ejabberd/ejabberd/_build/test/logs/ct_run.1697460461@597-weiss-master-df60818.2023-10-16_12.49.29/lib.ejabberd.logs/run.2023-10-16_12.49.30/ejabberd_suite.mam_query_rsm_before_slave.21106.html"},
     {tc_group_properties,[{name,mam_query_rsm_before},parallel]},
     {tc_group_path,[[{name,mam_master_slave},sequence],
                     [{name,redis},sequence]]},
     {data_dir,"/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd/test/ejabberd_SUITE_data/"},
     {priv_dir,"/home/runner/work/ejabberd/ejabberd/_build/test/logs/ct_run.1697460461@597-weiss-master-df60818.2023-10-16_12.49.29/lib.ejabberd.logs/run.2023-10-16_12.49.30/log_private/"}]

=== Current directory is "/home/runner/work/ejabberd/ejabberd/_build/test/logs/ct_run.1697460461@597-weiss-master-df60818.2023-10-16_12.49.29"

=== Started at 2023-10-16 12:55:09

<br />

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.969 ***</b><a id=e-31084 class="link-to-entry" href="#e-31084">&#x1f517;</a>
SENT:
&lt;stream:stream version='1.0'
               xml:lang='en'
               xmlns:stream='http://etherx.jabber.org/streams'
               to='redis.localhost'
               xmlns='jabber:client'/>

#stream_start{from = undefined,
              to = #jid{user = <<>>,server = <<"redis.localhost">>,
                        resource = <<>>,luser = <<>>,
                        lserver = <<"redis.localhost">>,lresource = <<>>},
              id = <<>>,
              version = {1,0},
              xmlns = <<"jabber:client">>,
              stream_xmlns = <<"http://etherx.jabber.org/streams">>,
              db_xmlns = <<>>,lang = <<"en">>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.971 ***</b><a id=e-31085 class="link-to-entry" href="#e-31085">&#x1f517;</a>
RECV:
&lt;stream:stream xmlns:stream='http://etherx.jabber.org/streams'
               xmlns='jabber:client'
               id='15386392861605969047'
               version='1.0'
               xml:lang='en'
               from='redis.localhost'/>

#stream_start{from = #jid{user = <<>>,server = <<"redis.localhost">>,
                          resource = <<>>,luser = <<>>,
                          lserver = <<"redis.localhost">>,lresource = <<>>},
              to = undefined,id = <<"15386392861605969047">>,
              version = {1,0},
              xmlns = <<"jabber:client">>,
              stream_xmlns = <<"http://etherx.jabber.org/streams">>,
              db_xmlns = <<>>,lang = <<"en">>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.971 ***</b><a id=e-31086 class="link-to-entry" href="#e-31086">&#x1f517;</a>
RECV:
&lt;stream:features>
  &lt;mechanisms xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>
    &lt;mechanism>DIGEST-MD5&lt;/mechanism>
    &lt;mechanism>PLAIN&lt;/mechanism>
    &lt;mechanism>SCRAM-SHA-512&lt;/mechanism>
    &lt;mechanism>SCRAM-SHA-256&lt;/mechanism>
    &lt;mechanism>SCRAM-SHA-1&lt;/mechanism>
    &lt;mechanism>X-OAUTH2&lt;/mechanism>
  &lt;/mechanisms>
  &lt;starttls xmlns='urn:ietf:params:xml:ns:xmpp-tls'/>
  &lt;register xmlns='http://jabber.org/features/iq-register'/>
  &lt;auth xmlns='http://jabber.org/features/iq-auth'/>
&lt;/stream:features>

#stream_features{
    sub_els =
        [#sasl_mechanisms{
             list =
                 [<<"DIGEST-MD5">>,<<"PLAIN">>,<<"SCRAM-SHA-512">>,
                  <<"SCRAM-SHA-256">>,<<"SCRAM-SHA-1">>,<<"X-OAUTH2">>]},
         #starttls{required = false},
         #feature_register{},
         #legacy_auth_feature{}]}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.971 ***</b><a id=e-31088 class="link-to-entry" href="#e-31088">&#x1f517;</a>
SENT:
&lt;auth mechanism='PLAIN'
      xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>dGVzdF9zbGF2ZSEjJCVeKigpYH4rLTtfPVtde318XEByZWRpcy5sb2NhbGhvc3QAdGVzdF9zbGF2ZSEjJCVeKigpYH4rLTtfPVtde318XABwYXNzd29yZCFAIyQlXiYqKCknImB+PD4rLS87Ol89W117fXxc&lt;/auth>

#sasl_auth{mechanism = <<"PLAIN">>,
           text = <<116,101,115,116,95,115,108,97,118,101,33,35,36,37,94,42,
                    40,41,96,126,43,45,59,95,61,91,93,123,125,124,92,64,114,
                    101,100,105,115,46,108,111,99,97,108,104,111,115,116,0,
                    116,101,115,116,95,115,108,97,118,101,33,35,36,37,94,42,
                    40,41,96,126,43,45,59,95,61,91,93,123,125,124,92,0,112,97,
                    115,115,119,111,114,100,33,64,35,36,37,94,38,42,40,41,39,
                    34,96,126,60,62,43,45,47,59,58,95,61,91,93,123,125,124,92>>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.973 ***</b><a id=e-31092 class="link-to-entry" href="#e-31092">&#x1f517;</a>
RECV:
&lt;success xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/>

#sasl_success{text = <<>>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.973 ***</b><a id=e-31093 class="link-to-entry" href="#e-31093">&#x1f517;</a>
SENT:
&lt;stream:stream version='1.0'
               xml:lang='en'
               xmlns:stream='http://etherx.jabber.org/streams'
               to='redis.localhost'
               xmlns='jabber:client'/>

#stream_start{from = undefined,
              to = #jid{user = <<>>,server = <<"redis.localhost">>,
                        resource = <<>>,luser = <<>>,
                        lserver = <<"redis.localhost">>,lresource = <<>>},
              id = <<>>,
              version = {1,0},
              xmlns = <<"jabber:client">>,
              stream_xmlns = <<"http://etherx.jabber.org/streams">>,
              db_xmlns = <<>>,lang = <<"en">>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.973 ***</b><a id=e-31096 class="link-to-entry" href="#e-31096">&#x1f517;</a>
RECV:
&lt;stream:stream xmlns:stream='http://etherx.jabber.org/streams'
               xmlns='jabber:client'
               id='7679401536795572780'
               version='1.0'
               xml:lang='en'
               from='redis.localhost'/>

#stream_start{from = #jid{user = <<>>,server = <<"redis.localhost">>,
                          resource = <<>>,luser = <<>>,
                          lserver = <<"redis.localhost">>,lresource = <<>>},
              to = undefined,id = <<"7679401536795572780">>,
              version = {1,0},
              xmlns = <<"jabber:client">>,
              stream_xmlns = <<"http://etherx.jabber.org/streams">>,
              db_xmlns = <<>>,lang = <<"en">>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.974 ***</b><a id=e-31097 class="link-to-entry" href="#e-31097">&#x1f517;</a>
RECV:
&lt;stream:features>
  &lt;compression xmlns='http://jabber.org/features/compress'>
    &lt;method>zlib&lt;/method>
  &lt;/compression>
  &lt;bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'/>
  &lt;session xmlns='urn:ietf:params:xml:ns:xmpp-session'>
    &lt;optional/>
  &lt;/session>
  &lt;c xmlns='http://jabber.org/protocol/caps'
     ver='9dw1fKaE0crSfkc9KTtBadLPkJA='
     node='http://www.process-one.net/en/ejabberd/'
     hash='sha-1'/>
  &lt;sm xmlns='urn:xmpp:sm:2'/>
  &lt;sm xmlns='urn:xmpp:sm:3'/>
  &lt;ver xmlns='urn:xmpp:features:rosterver'/>
  &lt;csi xmlns='urn:xmpp:csi:0'/>
&lt;/stream:features>

#stream_features{
    sub_els =
        [#compression{methods = [<<"zlib">>]},
         #bind{jid = undefined,resource = <<>>},
         #xmpp_session{optional = true},
         #caps{
             node = <<"http://www.process-one.net/en/ejabberd/">>,
             version = <<"9dw1fKaE0crSfkc9KTtBadLPkJA=">>,hash = <<"sha-1">>,
             exts = []},
         #feature_sm{xmlns = <<"urn:xmpp:sm:2">>},
         #feature_sm{xmlns = <<"urn:xmpp:sm:3">>},
         #rosterver_feature{},
         #feature_csi{}]}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.974 ***</b><a id=e-31098 class="link-to-entry" href="#e-31098">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='12098088672379651398'
    xmlns='jabber:client'>
  &lt;bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'>
    &lt;resource>resource!@#$%^&*()'"`~&lt;>+-/;:_=[]{}|\&lt;/resource>
  &lt;/bind>
&lt;/iq>

#iq{id = <<"12098088672379651398">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els = [#bind{jid = undefined,
                     resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.976 ***</b><a id=e-31102 class="link-to-entry" href="#e-31102">&#x1f517;</a>
RECV:
&lt;iq type='result'
    id='12098088672379651398'>
  &lt;bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'>
    &lt;jid>test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&*()'"`~&lt;>+-/;:_=[]{}|\&lt;/jid>
  &lt;/bind>
&lt;/iq>

#iq{id = <<"12098088672379651398">>,type = result,lang = <<>>,
    from = undefined,to = undefined,
    sub_els =
        [#bind{
             jid =
                 #jid{
                     user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"redis.localhost">>,
                     resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
                     luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"redis.localhost">>,
                     lresource =
                         <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
             resource = <<>>}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.977 ***</b><a id=e-31104 class="link-to-entry" href="#e-31104">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='5380088315853367385'
    xmlns='jabber:client'>
  &lt;prefs default='always'
         xmlns='urn:xmpp:mam:tmp'/>
&lt;/iq>

#iq{id = <<"5380088315853367385">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:tmp">>,default = always,
                          always = undefined,never = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.978 ***</b><a id=e-31105 class="link-to-entry" href="#e-31105">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='5380088315853367385'>
  &lt;prefs xmlns='urn:xmpp:mam:tmp'
         default='always'>
    &lt;always/>
    &lt;never/>
  &lt;/prefs>
&lt;/iq>

#iq{id = <<"5380088315853367385">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:tmp">>,default = always,
                          always = [],never = []}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.978 ***</b><a id=e-31106 class="link-to-entry" href="#e-31106">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='13813895397508916471'
    xmlns='jabber:client'>
  &lt;prefs default='always'
         xmlns='urn:xmpp:mam:0'/>
&lt;/iq>

#iq{id = <<"13813895397508916471">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:0">>,default = always,
                          always = undefined,never = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.978 ***</b><a id=e-31107 class="link-to-entry" href="#e-31107">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='13813895397508916471'>
  &lt;prefs xmlns='urn:xmpp:mam:0'
         default='always'>
    &lt;always/>
    &lt;never/>
  &lt;/prefs>
&lt;/iq>

#iq{id = <<"13813895397508916471">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:0">>,default = always,
                          always = [],never = []}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.978 ***</b><a id=e-31108 class="link-to-entry" href="#e-31108">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='12202885883887327021'
    xmlns='jabber:client'>
  &lt;prefs default='always'
         xmlns='urn:xmpp:mam:1'/>
&lt;/iq>

#iq{id = <<"12202885883887327021">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:1">>,default = always,
                          always = undefined,never = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.979 ***</b><a id=e-31109 class="link-to-entry" href="#e-31109">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='12202885883887327021'>
  &lt;prefs xmlns='urn:xmpp:mam:1'
         default='always'>
    &lt;always/>
    &lt;never/>
  &lt;/prefs>
&lt;/iq>

#iq{id = <<"12202885883887327021">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:1">>,default = always,
                          always = [],never = []}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.979 ***</b><a id=e-31110 class="link-to-entry" href="#e-31110">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='1250187246974912996'
    xmlns='jabber:client'>
  &lt;prefs default='always'
         xmlns='urn:xmpp:mam:2'/>
&lt;/iq>

#iq{id = <<"1250187246974912996">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:2">>,default = always,
                          always = undefined,never = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.979 ***</b><a id=e-31111 class="link-to-entry" href="#e-31111">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='1250187246974912996'>
  &lt;prefs xmlns='urn:xmpp:mam:2'
         default='always'>
    &lt;always/>
    &lt;never/>
  &lt;/prefs>
&lt;/iq>

#iq{id = <<"1250187246974912996">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:2">>,default = always,
                          always = [],never = []}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.980 ***</b><a id=e-31112 class="link-to-entry" href="#e-31112">&#x1f517;</a>
SENT:
&lt;presence id='103756245119613137'
          xmlns='jabber:client'/>

#presence{id = <<"103756245119613137">>,type = available,lang = <<>>,
          from = undefined,to = undefined,show = undefined,status = [],
          priority = undefined,sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.981 ***</b><a id=e-31114 class="link-to-entry" href="#e-31114">&#x1f517;</a>
RECV:
&lt;presence xml:lang='en'
          to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
          from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
          id='103756245119613137'>
  &lt;x xmlns='vcard-temp:x:update'/>
&lt;/presence>

#presence{id = <<"103756245119613137">>,type = available,lang = <<"en">>,
          from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                      server = <<"redis.localhost">>,
                      resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
                      luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                      lserver = <<"redis.localhost">>,
                      lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
          to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                    server = <<"redis.localhost">>,
                    resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
                    luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                    lserver = <<"redis.localhost">>,
                    lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
          show = undefined,status = [],priority = undefined,
          sub_els = [#vcard_xupdate{hash = undefined}],
          meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:09.988 ***</b><a id=e-31130 class="link-to-entry" href="#e-31130">&#x1f517;</a>
RECV:
&lt;message xml:lang='en'
         to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         id='3781685931061664307'>
  &lt;archived xmlns='urn:xmpp:mam:tmp'
            by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
            id='1697460909987909'/>
  &lt;stanza-id xmlns='urn:xmpp:sid:0'
             by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
             id='1697460909987909'/>
  &lt;body xml:lang='en'>1&lt;/body>
&lt;/message>

#message{
    id = <<"3781685931061664307">>,type = normal,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],
    body = [#text{lang = <<"en">>,data = <<"1">>}],
    thread = undefined,
    sub_els =
        [#mam_archived{
             by =
                 #jid{
                     user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"redis.localhost">>,resource = <<>>,
                     luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"redis.localhost">>,lresource = <<>>},
             id = <<"1697460909987909">>},
         #stanza_id{
             by =
                 #jid{
                     user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"redis.localhost">>,resource = <<>>,
                     luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"redis.localhost">>,lresource = <<>>},
             id = <<"1697460909987909">>}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.031 ***</b><a id=e-31131 class="link-to-entry" href="#e-31131">&#x1f517;</a>
RECV:
&lt;message xml:lang='en'
         to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         id='4934579986413502092'>
  &lt;archived xmlns='urn:xmpp:mam:tmp'
            by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
            id='1697460910030468'/>
  &lt;stanza-id xmlns='urn:xmpp:sid:0'
             by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
             id='1697460910030468'/>
  &lt;body xml:lang='en'>2&lt;/body>
&lt;/message>

#message{
    id = <<"4934579986413502092">>,type = normal,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],
    body = [#text{lang = <<"en">>,data = <<"2">>}],
    thread = undefined,
    sub_els =
        [#mam_archived{
             by =
                 #jid{
                     user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"redis.localhost">>,resource = <<>>,
                     luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"redis.localhost">>,lresource = <<>>},
             id = <<"1697460910030468">>},
         #stanza_id{
             by =
                 #jid{
                     user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"redis.localhost">>,resource = <<>>,
                     luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"redis.localhost">>,lresource = <<>>},
             id = <<"1697460910030468">>}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.033 ***</b><a id=e-31132 class="link-to-entry" href="#e-31132">&#x1f517;</a>
RECV:
&lt;message xml:lang='en'
         to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         id='15710705358850072726'>
  &lt;archived xmlns='urn:xmpp:mam:tmp'
            by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
            id='1697460910030869'/>
  &lt;stanza-id xmlns='urn:xmpp:sid:0'
             by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
             id='1697460910030869'/>
  &lt;body xml:lang='en'>3&lt;/body>
&lt;/message>

#message{
    id = <<"15710705358850072726">>,type = normal,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],
    body = [#text{lang = <<"en">>,data = <<"3">>}],
    thread = undefined,
    sub_els =
        [#mam_archived{
             by =
                 #jid{
                     user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"redis.localhost">>,resource = <<>>,
                     luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"redis.localhost">>,lresource = <<>>},
             id = <<"1697460910030869">>},
         #stanza_id{
             by =
                 #jid{
                     user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"redis.localhost">>,resource = <<>>,
                     luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"redis.localhost">>,lresource = <<>>},
             id = <<"1697460910030869">>}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.034 ***</b><a id=e-31134 class="link-to-entry" href="#e-31134">&#x1f517;</a>
RECV:
&lt;message xml:lang='en'
         to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         id='3784494869758530138'>
  &lt;archived xmlns='urn:xmpp:mam:tmp'
            by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
            id='1697460910031361'/>
  &lt;stanza-id xmlns='urn:xmpp:sid:0'
             by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
             id='1697460910031361'/>
  &lt;body xml:lang='en'>4&lt;/body>
&lt;/message>

#message{
    id = <<"3784494869758530138">>,type = normal,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],
    body = [#text{lang = <<"en">>,data = <<"4">>}],
    thread = undefined,
    sub_els =
        [#mam_archived{
             by =
                 #jid{
                     user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"redis.localhost">>,resource = <<>>,
                     luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"redis.localhost">>,lresource = <<>>},
             id = <<"1697460910031361">>},
         #stanza_id{
             by =
                 #jid{
                     user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"redis.localhost">>,resource = <<>>,
                     luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"redis.localhost">>,lresource = <<>>},
             id = <<"1697460910031361">>}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.036 ***</b><a id=e-31138 class="link-to-entry" href="#e-31138">&#x1f517;</a>
RECV:
&lt;message xml:lang='en'
         to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         id='901238411716952559'>
  &lt;archived xmlns='urn:xmpp:mam:tmp'
            by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
            id='1697460910032466'/>
  &lt;stanza-id xmlns='urn:xmpp:sid:0'
             by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
             id='1697460910032466'/>
  &lt;body xml:lang='en'>5&lt;/body>
&lt;/message>

#message{
    id = <<"901238411716952559">>,type = normal,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],
    body = [#text{lang = <<"en">>,data = <<"5">>}],
    thread = undefined,
    sub_els =
        [#mam_archived{
             by =
                 #jid{
                     user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"redis.localhost">>,resource = <<>>,
                     luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"redis.localhost">>,lresource = <<>>},
             id = <<"1697460910032466">>},
         #stanza_id{
             by =
                 #jid{
                     user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"redis.localhost">>,resource = <<>>,
                     luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"redis.localhost">>,lresource = <<>>},
             id = <<"1697460910032466">>}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.036 ***</b><a id=e-31141 class="link-to-entry" href="#e-31141">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='7192811844236618466'
    xmlns='jabber:client'>
  &lt;query queryid='10482856818000458548'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before/>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"7192811844236618466">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"10482856818000458548">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<>>,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.039 ***</b><a id=e-31143 class="link-to-entry" href="#e-31143">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460909987909'
          queryid='10482856818000458548'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"10482856818000458548">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.039 ***</b><a id=e-31145 class="link-to-entry" href="#e-31145">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460910030468'
          queryid='10482856818000458548'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"10482856818000458548">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.039 ***</b><a id=e-31146 class="link-to-entry" href="#e-31146">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460910030869'
          queryid='10482856818000458548'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"10482856818000458548">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.040 ***</b><a id=e-31148 class="link-to-entry" href="#e-31148">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460910031361'
          queryid='10482856818000458548'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3784494869758530138'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910031361'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910031361'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.031361Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"10482856818000458548">>,
    id = <<"1697460910031361">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,31361},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3784494869758530138">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.040 ***</b><a id=e-31150 class="link-to-entry" href="#e-31150">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460910032466'
          queryid='10482856818000458548'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='901238411716952559'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910032466'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910032466'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.032466Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"10482856818000458548">>,
    id = <<"1697460910032466">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,32466},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"901238411716952559">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.041 ***</b><a id=e-31152 class="link-to-entry" href="#e-31152">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='7192811844236618466'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='10482856818000458548'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910032466&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"7192811844236618466">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"10482856818000458548">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910032466">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.041 ***</b><a id=e-31154 class="link-to-entry" href="#e-31154">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='12221279618998903689'
    xmlns='jabber:client'>
  &lt;query queryid='18311142125070572632'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910032466&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"12221279618998903689">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"18311142125070572632">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910032466">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.043 ***</b><a id=e-31157 class="link-to-entry" href="#e-31157">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460909987909'
          queryid='18311142125070572632'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"18311142125070572632">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.043 ***</b><a id=e-31158 class="link-to-entry" href="#e-31158">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460910030468'
          queryid='18311142125070572632'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"18311142125070572632">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.044 ***</b><a id=e-31160 class="link-to-entry" href="#e-31160">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460910030869'
          queryid='18311142125070572632'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"18311142125070572632">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.044 ***</b><a id=e-31162 class="link-to-entry" href="#e-31162">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460910031361'
          queryid='18311142125070572632'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3784494869758530138'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910031361'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910031361'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.031361Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"18311142125070572632">>,
    id = <<"1697460910031361">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,31361},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3784494869758530138">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.044 ***</b><a id=e-31164 class="link-to-entry" href="#e-31164">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='12221279618998903689'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='18311142125070572632'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910031361&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"12221279618998903689">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"18311142125070572632">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910031361">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.045 ***</b><a id=e-31166 class="link-to-entry" href="#e-31166">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='3421576894450377380'
    xmlns='jabber:client'>
  &lt;query queryid='13749883873165565148'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910031361&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"3421576894450377380">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"13749883873165565148">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910031361">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.046 ***</b><a id=e-31168 class="link-to-entry" href="#e-31168">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460909987909'
          queryid='13749883873165565148'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"13749883873165565148">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.047 ***</b><a id=e-31170 class="link-to-entry" href="#e-31170">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460910030468'
          queryid='13749883873165565148'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"13749883873165565148">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.048 ***</b><a id=e-31173 class="link-to-entry" href="#e-31173">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460910030869'
          queryid='13749883873165565148'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"13749883873165565148">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.048 ***</b><a id=e-31174 class="link-to-entry" href="#e-31174">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='3421576894450377380'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='13749883873165565148'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910030869&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"3421576894450377380">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"13749883873165565148">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910030869">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.048 ***</b><a id=e-31175 class="link-to-entry" href="#e-31175">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='12017028036052002614'
    xmlns='jabber:client'>
  &lt;query queryid='3628930134311145109'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910030869&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"12017028036052002614">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"3628930134311145109">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910030869">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.050 ***</b><a id=e-31178 class="link-to-entry" href="#e-31178">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460909987909'
          queryid='3628930134311145109'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"3628930134311145109">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.050 ***</b><a id=e-31179 class="link-to-entry" href="#e-31179">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460910030468'
          queryid='3628930134311145109'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"3628930134311145109">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.050 ***</b><a id=e-31180 class="link-to-entry" href="#e-31180">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='12017028036052002614'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='3628930134311145109'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910030468&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"12017028036052002614">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"3628930134311145109">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910030468">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.051 ***</b><a id=e-31182 class="link-to-entry" href="#e-31182">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='16184164510583800386'
    xmlns='jabber:client'>
  &lt;query queryid='4359828212558361185'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910030468&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"16184164510583800386">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"4359828212558361185">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910030468">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.053 ***</b><a id=e-31185 class="link-to-entry" href="#e-31185">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460909987909'
          queryid='4359828212558361185'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"4359828212558361185">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.053 ***</b><a id=e-31186 class="link-to-entry" href="#e-31186">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='16184164510583800386'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='4359828212558361185'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460909987909&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"16184164510583800386">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"4359828212558361185">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460909987909">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.053 ***</b><a id=e-31187 class="link-to-entry" href="#e-31187">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='3296656439204473977'
    xmlns='jabber:client'>
  &lt;query queryid='7665481414272826918'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460909987909&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"3296656439204473977">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"7665481414272826918">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460909987909">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.054 ***</b><a id=e-31188 class="link-to-entry" href="#e-31188">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='3296656439204473977'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='7665481414272826918'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"3296656439204473977">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"7665481414272826918">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first = undefined,index = undefined,last = undefined,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.054 ***</b><a id=e-31189 class="link-to-entry" href="#e-31189">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='4341034579632006606'
    xmlns='jabber:client'>
  &lt;query queryid='11194857196931775435'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>1&lt;/max>
      &lt;before/>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"4341034579632006606">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"11194857196931775435">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<>>,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 1},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.056 ***</b><a id=e-31193 class="link-to-entry" href="#e-31193">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1697460910032466'
          queryid='11194857196931775435'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='901238411716952559'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910032466'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910032466'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.032466Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"11194857196931775435">>,
    id = <<"1697460910032466">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,32466},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"901238411716952559">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.056 ***</b><a id=e-31194 class="link-to-entry" href="#e-31194">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='4341034579632006606'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='11194857196931775435'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460910032466&lt;/first>
      &lt;last>1697460910032466&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"4341034579632006606">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"11194857196931775435">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460910032466">>},
                     index = undefined,last = <<"1697460910032466">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.056 ***</b><a id=e-31195 class="link-to-entry" href="#e-31195">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='11555411126111972557'
    xmlns='jabber:client'>
  &lt;query queryid='3759627367952937081'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before/>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"11555411126111972557">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"3759627367952937081">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<>>,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.059 ***</b><a id=e-31199 class="link-to-entry" href="#e-31199">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='11555411126111972557'/>

#iq{id = <<"11555411126111972557">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.059 ***</b><a id=e-31202 class="link-to-entry" href="#e-31202">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460909987909'
          queryid='3759627367952937081'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"3759627367952937081">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.060 ***</b><a id=e-31206 class="link-to-entry" href="#e-31206">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460910030468'
          queryid='3759627367952937081'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"3759627367952937081">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.060 ***</b><a id=e-31207 class="link-to-entry" href="#e-31207">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460910030869'
          queryid='3759627367952937081'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"3759627367952937081">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.061 ***</b><a id=e-31208 class="link-to-entry" href="#e-31208">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460910031361'
          queryid='3759627367952937081'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3784494869758530138'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910031361'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910031361'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.031361Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"3759627367952937081">>,
    id = <<"1697460910031361">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,31361},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3784494869758530138">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.061 ***</b><a id=e-31209 class="link-to-entry" href="#e-31209">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460910032466'
          queryid='3759627367952937081'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='901238411716952559'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910032466'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910032466'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.032466Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"3759627367952937081">>,
    id = <<"1697460910032466">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,32466},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"901238411716952559">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.061 ***</b><a id=e-31210 class="link-to-entry" href="#e-31210">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='true'
       queryid='3759627367952937081'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910032466&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"3759627367952937081">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910032466">>,
                     max = undefined},
             stable = undefined,complete = true},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.062 ***</b><a id=e-31211 class="link-to-entry" href="#e-31211">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='18321454212653498404'
    xmlns='jabber:client'>
  &lt;query queryid='13753321978545264133'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910032466&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"18321454212653498404">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"13753321978545264133">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910032466">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.064 ***</b><a id=e-31216 class="link-to-entry" href="#e-31216">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='18321454212653498404'/>

#iq{id = <<"18321454212653498404">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.065 ***</b><a id=e-31218 class="link-to-entry" href="#e-31218">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460909987909'
          queryid='13753321978545264133'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"13753321978545264133">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.065 ***</b><a id=e-31220 class="link-to-entry" href="#e-31220">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460910030468'
          queryid='13753321978545264133'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"13753321978545264133">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.066 ***</b><a id=e-31222 class="link-to-entry" href="#e-31222">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460910030869'
          queryid='13753321978545264133'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"13753321978545264133">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.066 ***</b><a id=e-31223 class="link-to-entry" href="#e-31223">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460910031361'
          queryid='13753321978545264133'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3784494869758530138'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910031361'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910031361'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.031361Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"13753321978545264133">>,
    id = <<"1697460910031361">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,31361},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3784494869758530138">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.067 ***</b><a id=e-31224 class="link-to-entry" href="#e-31224">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='true'
       queryid='13753321978545264133'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910031361&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"13753321978545264133">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910031361">>,
                     max = undefined},
             stable = undefined,complete = true},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.067 ***</b><a id=e-31226 class="link-to-entry" href="#e-31226">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='1518225081375235851'
    xmlns='jabber:client'>
  &lt;query queryid='10024699961006246687'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910031361&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"1518225081375235851">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"10024699961006246687">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910031361">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.069 ***</b><a id=e-31232 class="link-to-entry" href="#e-31232">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='1518225081375235851'/>

#iq{id = <<"1518225081375235851">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.069 ***</b><a id=e-31233 class="link-to-entry" href="#e-31233">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460909987909'
          queryid='10024699961006246687'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"10024699961006246687">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.070 ***</b><a id=e-31234 class="link-to-entry" href="#e-31234">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460910030468'
          queryid='10024699961006246687'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"10024699961006246687">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.070 ***</b><a id=e-31235 class="link-to-entry" href="#e-31235">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460910030869'
          queryid='10024699961006246687'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"10024699961006246687">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.070 ***</b><a id=e-31237 class="link-to-entry" href="#e-31237">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='true'
       queryid='10024699961006246687'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910030869&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"10024699961006246687">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910030869">>,
                     max = undefined},
             stable = undefined,complete = true},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.071 ***</b><a id=e-31238 class="link-to-entry" href="#e-31238">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='15778467903939435077'
    xmlns='jabber:client'>
  &lt;query queryid='10353086388055916309'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910030869&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"15778467903939435077">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"10353086388055916309">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910030869">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.074 ***</b><a id=e-31243 class="link-to-entry" href="#e-31243">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='15778467903939435077'/>

#iq{id = <<"15778467903939435077">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.074 ***</b><a id=e-31244 class="link-to-entry" href="#e-31244">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460909987909'
          queryid='10353086388055916309'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"10353086388055916309">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.075 ***</b><a id=e-31246 class="link-to-entry" href="#e-31246">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460910030468'
          queryid='10353086388055916309'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"10353086388055916309">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.075 ***</b><a id=e-31247 class="link-to-entry" href="#e-31247">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='true'
       queryid='10353086388055916309'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910030468&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"10353086388055916309">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910030468">>,
                     max = undefined},
             stable = undefined,complete = true},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.075 ***</b><a id=e-31249 class="link-to-entry" href="#e-31249">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='3341354389322689469'
    xmlns='jabber:client'>
  &lt;query queryid='16169581335426558994'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910030468&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"3341354389322689469">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"16169581335426558994">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910030468">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.077 ***</b><a id=e-31252 class="link-to-entry" href="#e-31252">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='3341354389322689469'/>

#iq{id = <<"3341354389322689469">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.077 ***</b><a id=e-31253 class="link-to-entry" href="#e-31253">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460909987909'
          queryid='16169581335426558994'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"16169581335426558994">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.077 ***</b><a id=e-31254 class="link-to-entry" href="#e-31254">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='true'
       queryid='16169581335426558994'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460909987909&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"16169581335426558994">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460909987909">>,
                     max = undefined},
             stable = undefined,complete = true},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.078 ***</b><a id=e-31256 class="link-to-entry" href="#e-31256">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='2023851416821493377'
    xmlns='jabber:client'>
  &lt;query queryid='10112226718821245090'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460909987909&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"2023851416821493377">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"10112226718821245090">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460909987909">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.079 ***</b><a id=e-31260 class="link-to-entry" href="#e-31260">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='2023851416821493377'/>

#iq{id = <<"2023851416821493377">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.080 ***</b><a id=e-31261 class="link-to-entry" href="#e-31261">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='true'
       queryid='10112226718821245090'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"10112226718821245090">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first = undefined,index = undefined,last = undefined,
                     max = undefined},
             stable = undefined,complete = true},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.080 ***</b><a id=e-31262 class="link-to-entry" href="#e-31262">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='9972440209714241367'
    xmlns='jabber:client'>
  &lt;query queryid='6442393525915746348'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>1&lt;/max>
      &lt;before/>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"9972440209714241367">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"6442393525915746348">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<>>,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 1},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.081 ***</b><a id=e-31265 class="link-to-entry" href="#e-31265">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='9972440209714241367'/>

#iq{id = <<"9972440209714241367">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.081 ***</b><a id=e-31267 class="link-to-entry" href="#e-31267">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1697460910032466'
          queryid='6442393525915746348'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='901238411716952559'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910032466'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910032466'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.032466Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"6442393525915746348">>,
    id = <<"1697460910032466">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,32466},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"901238411716952559">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.082 ***</b><a id=e-31268 class="link-to-entry" href="#e-31268">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='false'
       queryid='6442393525915746348'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460910032466&lt;/first>
      &lt;last>1697460910032466&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"6442393525915746348">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460910032466">>},
                     index = undefined,last = <<"1697460910032466">>,
                     max = undefined},
             stable = undefined,complete = false},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.082 ***</b><a id=e-31269 class="link-to-entry" href="#e-31269">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='5373820643340225095'
    xmlns='jabber:client'>
  &lt;query queryid='426084928176326589'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before/>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"5373820643340225095">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"426084928176326589">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<>>,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.083 ***</b><a id=e-31271 class="link-to-entry" href="#e-31271">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460909987909'
          queryid='426084928176326589'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"426084928176326589">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.084 ***</b><a id=e-31273 class="link-to-entry" href="#e-31273">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460910030468'
          queryid='426084928176326589'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"426084928176326589">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.085 ***</b><a id=e-31275 class="link-to-entry" href="#e-31275">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460910030869'
          queryid='426084928176326589'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"426084928176326589">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.085 ***</b><a id=e-31277 class="link-to-entry" href="#e-31277">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460910031361'
          queryid='426084928176326589'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3784494869758530138'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910031361'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910031361'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.031361Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"426084928176326589">>,
    id = <<"1697460910031361">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,31361},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3784494869758530138">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.085 ***</b><a id=e-31278 class="link-to-entry" href="#e-31278">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460910032466'
          queryid='426084928176326589'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='901238411716952559'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910032466'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910032466'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.032466Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"426084928176326589">>,
    id = <<"1697460910032466">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,32466},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"901238411716952559">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.086 ***</b><a id=e-31279 class="link-to-entry" href="#e-31279">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='5373820643340225095'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910032466&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"5373820643340225095">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910032466">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.086 ***</b><a id=e-31281 class="link-to-entry" href="#e-31281">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='1952960316625787553'
    xmlns='jabber:client'>
  &lt;query queryid='12600271986254044175'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910032466&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"1952960316625787553">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"12600271986254044175">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910032466">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.087 ***</b><a id=e-31284 class="link-to-entry" href="#e-31284">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460909987909'
          queryid='12600271986254044175'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"12600271986254044175">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.088 ***</b><a id=e-31285 class="link-to-entry" href="#e-31285">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460910030468'
          queryid='12600271986254044175'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"12600271986254044175">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.088 ***</b><a id=e-31286 class="link-to-entry" href="#e-31286">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460910030869'
          queryid='12600271986254044175'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"12600271986254044175">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.089 ***</b><a id=e-31288 class="link-to-entry" href="#e-31288">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460910031361'
          queryid='12600271986254044175'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3784494869758530138'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910031361'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910031361'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.031361Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"12600271986254044175">>,
    id = <<"1697460910031361">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,31361},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3784494869758530138">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.089 ***</b><a id=e-31289 class="link-to-entry" href="#e-31289">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='1952960316625787553'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910031361&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"1952960316625787553">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910031361">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.090 ***</b><a id=e-31292 class="link-to-entry" href="#e-31292">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='14582883517297928852'
    xmlns='jabber:client'>
  &lt;query queryid='2557903292757073399'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910031361&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"14582883517297928852">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"2557903292757073399">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910031361">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.091 ***</b><a id=e-31296 class="link-to-entry" href="#e-31296">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460909987909'
          queryid='2557903292757073399'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"2557903292757073399">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.092 ***</b><a id=e-31297 class="link-to-entry" href="#e-31297">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460910030468'
          queryid='2557903292757073399'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"2557903292757073399">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.092 ***</b><a id=e-31298 class="link-to-entry" href="#e-31298">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460910030869'
          queryid='2557903292757073399'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"2557903292757073399">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.092 ***</b><a id=e-31299 class="link-to-entry" href="#e-31299">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='14582883517297928852'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910030869&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"14582883517297928852">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910030869">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.092 ***</b><a id=e-31300 class="link-to-entry" href="#e-31300">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='531742925735114645'
    xmlns='jabber:client'>
  &lt;query queryid='15313266494576902501'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910030869&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"531742925735114645">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"15313266494576902501">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910030869">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.094 ***</b><a id=e-31301 class="link-to-entry" href="#e-31301">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460909987909'
          queryid='15313266494576902501'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"15313266494576902501">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.094 ***</b><a id=e-31304 class="link-to-entry" href="#e-31304">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460910030468'
          queryid='15313266494576902501'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"15313266494576902501">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.095 ***</b><a id=e-31305 class="link-to-entry" href="#e-31305">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='531742925735114645'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910030468&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"531742925735114645">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910030468">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.095 ***</b><a id=e-31308 class="link-to-entry" href="#e-31308">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='11917359448206289450'
    xmlns='jabber:client'>
  &lt;query queryid='12100051152792443191'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910030468&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"11917359448206289450">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"12100051152792443191">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910030468">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.096 ***</b><a id=e-31310 class="link-to-entry" href="#e-31310">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460909987909'
          queryid='12100051152792443191'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"12100051152792443191">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.097 ***</b><a id=e-31311 class="link-to-entry" href="#e-31311">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='11917359448206289450'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460909987909&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"11917359448206289450">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460909987909">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.097 ***</b><a id=e-31313 class="link-to-entry" href="#e-31313">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='5136218600444856517'
    xmlns='jabber:client'>
  &lt;query queryid='14592487093016537531'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460909987909&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"5136218600444856517">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"14592487093016537531">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460909987909">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.099 ***</b><a id=e-31317 class="link-to-entry" href="#e-31317">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='5136218600444856517'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"5136218600444856517">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_fin{xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
                        rsm = #rsm_set{'after' = undefined,before = undefined,
                                       count = 5,first = undefined,
                                       index = undefined,last = undefined,
                                       max = undefined},
                        stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.099 ***</b><a id=e-31318 class="link-to-entry" href="#e-31318">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='5831308582333099206'
    xmlns='jabber:client'>
  &lt;query queryid='7111751266813291295'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>1&lt;/max>
      &lt;before/>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"5831308582333099206">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"7111751266813291295">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<>>,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 1},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.101 ***</b><a id=e-31322 class="link-to-entry" href="#e-31322">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1697460910032466'
          queryid='7111751266813291295'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='901238411716952559'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910032466'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910032466'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.032466Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"7111751266813291295">>,
    id = <<"1697460910032466">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,32466},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"901238411716952559">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.101 ***</b><a id=e-31323 class="link-to-entry" href="#e-31323">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='5831308582333099206'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460910032466&lt;/first>
      &lt;last>1697460910032466&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"5831308582333099206">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460910032466">>},
                     index = undefined,last = <<"1697460910032466">>,
                     max = undefined},
             stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.101 ***</b><a id=e-31324 class="link-to-entry" href="#e-31324">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='4420402230252547677'
    xmlns='jabber:client'>
  &lt;query queryid='9996250092062557615'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before/>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"4420402230252547677">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"9996250092062557615">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<>>,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.103 ***</b><a id=e-31326 class="link-to-entry" href="#e-31326">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460909987909'
          queryid='9996250092062557615'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"9996250092062557615">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.103 ***</b><a id=e-31328 class="link-to-entry" href="#e-31328">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460910030468'
          queryid='9996250092062557615'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"9996250092062557615">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.104 ***</b><a id=e-31329 class="link-to-entry" href="#e-31329">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460910030869'
          queryid='9996250092062557615'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"9996250092062557615">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.104 ***</b><a id=e-31330 class="link-to-entry" href="#e-31330">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460910031361'
          queryid='9996250092062557615'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3784494869758530138'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910031361'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910031361'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.031361Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"9996250092062557615">>,
    id = <<"1697460910031361">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,31361},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3784494869758530138">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.105 ***</b><a id=e-31331 class="link-to-entry" href="#e-31331">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460910032466'
          queryid='9996250092062557615'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='901238411716952559'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910032466'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910032466'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.032466Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"9996250092062557615">>,
    id = <<"1697460910032466">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,32466},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"901238411716952559">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.105 ***</b><a id=e-31332 class="link-to-entry" href="#e-31332">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='4420402230252547677'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910032466&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"4420402230252547677">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910032466">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.105 ***</b><a id=e-31333 class="link-to-entry" href="#e-31333">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='14125134276798620510'
    xmlns='jabber:client'>
  &lt;query queryid='13741624666515871942'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910032466&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"14125134276798620510">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"13741624666515871942">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910032466">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.106 ***</b><a id=e-31336 class="link-to-entry" href="#e-31336">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460909987909'
          queryid='13741624666515871942'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"13741624666515871942">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.107 ***</b><a id=e-31338 class="link-to-entry" href="#e-31338">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460910030468'
          queryid='13741624666515871942'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"13741624666515871942">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.107 ***</b><a id=e-31339 class="link-to-entry" href="#e-31339">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460910030869'
          queryid='13741624666515871942'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"13741624666515871942">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.109 ***</b><a id=e-31340 class="link-to-entry" href="#e-31340">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460910031361'
          queryid='13741624666515871942'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3784494869758530138'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910031361'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910031361'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.031361Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"13741624666515871942">>,
    id = <<"1697460910031361">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,31361},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3784494869758530138">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910031361">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.109 ***</b><a id=e-31341 class="link-to-entry" href="#e-31341">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='14125134276798620510'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910031361&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"14125134276798620510">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910031361">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.110 ***</b><a id=e-31342 class="link-to-entry" href="#e-31342">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='14536339621111307697'
    xmlns='jabber:client'>
  &lt;query queryid='18140201861753449417'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910031361&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"14536339621111307697">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"18140201861753449417">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910031361">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.115 ***</b><a id=e-31350 class="link-to-entry" href="#e-31350">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460909987909'
          queryid='18140201861753449417'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"18140201861753449417">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.115 ***</b><a id=e-31351 class="link-to-entry" href="#e-31351">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460910030468'
          queryid='18140201861753449417'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"18140201861753449417">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.115 ***</b><a id=e-31352 class="link-to-entry" href="#e-31352">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460910030869'
          queryid='18140201861753449417'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15710705358850072726'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030869'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030869'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030869Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"18140201861753449417">>,
    id = <<"1697460910030869">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30869},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15710705358850072726">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030869">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.116 ***</b><a id=e-31353 class="link-to-entry" href="#e-31353">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='14536339621111307697'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910030869&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"14536339621111307697">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910030869">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.116 ***</b><a id=e-31354 class="link-to-entry" href="#e-31354">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='5225273867031512168'
    xmlns='jabber:client'>
  &lt;query queryid='17978700827975971419'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910030869&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"5225273867031512168">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"17978700827975971419">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910030869">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.118 ***</b><a id=e-31361 class="link-to-entry" href="#e-31361">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460909987909'
          queryid='17978700827975971419'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"17978700827975971419">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.119 ***</b><a id=e-31362 class="link-to-entry" href="#e-31362">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460910030468'
          queryid='17978700827975971419'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='4934579986413502092'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910030468'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910030468'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.030468Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"17978700827975971419">>,
    id = <<"1697460910030468">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,30468},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"4934579986413502092">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910030468">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.119 ***</b><a id=e-31363 class="link-to-entry" href="#e-31363">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='5225273867031512168'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460910030468&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"5225273867031512168">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460910030468">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.120 ***</b><a id=e-31364 class="link-to-entry" href="#e-31364">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='7672892140754064186'
    xmlns='jabber:client'>
  &lt;query queryid='2059522679318404957'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460910030468&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"7672892140754064186">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"2059522679318404957">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460910030468">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.121 ***</b><a id=e-31369 class="link-to-entry" href="#e-31369">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460909987909'
          queryid='2059522679318404957'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='3781685931061664307'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460909987909'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460909987909'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:09.987909Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"2059522679318404957">>,
    id = <<"1697460909987909">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460909,987909},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"3781685931061664307">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460909987909">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.121 ***</b><a id=e-31371 class="link-to-entry" href="#e-31371">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='7672892140754064186'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460909987909&lt;/first>
      &lt;last>1697460909987909&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"7672892140754064186">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460909987909">>},
                     index = undefined,last = <<"1697460909987909">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.122 ***</b><a id=e-31372 class="link-to-entry" href="#e-31372">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='12714122866560214496'
    xmlns='jabber:client'>
  &lt;query queryid='16881733424429412145'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;before>1697460909987909&lt;/before>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"12714122866560214496">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"16881733424429412145">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<"1697460909987909">>,
                     count = undefined,first = undefined,index = undefined,
                     last = undefined,max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.123 ***</b><a id=e-31374 class="link-to-entry" href="#e-31374">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='12714122866560214496'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"12714122866560214496">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"redis.localhost">>,resource = <<>>,
                luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"redis.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"redis.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"redis.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_fin{xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
                        rsm = #rsm_set{'after' = undefined,before = undefined,
                                       count = 5,first = undefined,
                                       index = undefined,last = undefined,
                                       max = undefined},
                        stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.124 ***</b><a id=e-31376 class="link-to-entry" href="#e-31376">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='10463403184313054995'
    xmlns='jabber:client'>
  &lt;query queryid='18315342276375625665'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>1&lt;/max>
      &lt;before/>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"10463403184313054995">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"18315342276375625665">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = <<>>,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 1},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.125 ***</b><a id=e-31379 class="link-to-entry" href="#e-31379">&#x1f517;</a>
RECV:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1697460910032466'
          queryid='18315342276375625665'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='901238411716952559'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                  id='1697460910032466'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
                   id='1697460910032466'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='redis.localhost'
             stamp='2023-10-16T12:55:10.032466Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,resource = <<>>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"redis.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"redis.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"18315342276375625665">>,
    id = <<"1697460910032466">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1697,460910,32466},
         from =
          #jid{
           user = <<>>,server = <<"redis.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"redis.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@redis.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"901238411716952559">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_slave!#$%^*()`~+-;_=[]{}|\\@redis.localhost">>},
               {<<"id">>,<<"1697460910032466">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-10-16 12:55:10.125 ***</b><a id=e-31380 class="link-to-entry" href="#e-31380">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_slave!#$%^*()`~+-;_=[]{}|\@redis.localhost'
    type='result'
    id='10463403184313054995'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1697460910032466&lt;/first>
      &lt;last>1697460910032466&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"10463403184313054995">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,resource = <<>>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"redis.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"redis.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1697460910032466">>},
                     index = undefined,last = <<"1697460910032466">>,
                     max = undefined},
             stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>
<a name="end"></a>


=== Ended at 2023-10-16 12:55:10
=== successfully completed test case
=== === Returned value: [{receiver,undefined},
                     {csi,true},
                     {rosterver,true},
                     {sm,true},
                     {compression,[&lt;&lt;"zlib"&gt;&gt;]},
                     {stream_id,&lt;&lt;"7679401536795572780"&gt;&gt;},
                     {sasl,#Fun&lt;suite.6.122050307&gt;},
                     {legacy_auth,true},
                     {register,true},
                     {starttls,true},
                     {mechs,
                         [&lt;&lt;"DIGEST-MD5"&gt;&gt;,&lt;&lt;"PLAIN"&gt;&gt;,&lt;&lt;"SCRAM-SHA-512"&gt;&gt;,
                          &lt;&lt;"SCRAM-SHA-256"&gt;&gt;,&lt;&lt;"SCRAM-SHA-1"&gt;&gt;,
                          &lt;&lt;"X-OAUTH2"&gt;&gt;]},
                     {peer,
                         {jid,&lt;&lt;"test_master!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"redis.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"test_master!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"redis.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;}},
                     {peer_nick,
                         &lt;&lt;"master_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {user,&lt;&lt;"test_slave!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;},
                     {slave,
                         {jid,&lt;&lt;"test_slave!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"redis.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"test_slave!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"redis.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;}},
                     {master,
                         {jid,&lt;&lt;"test_master!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"redis.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"test_master!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"redis.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;}},
                     {resource,&lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {nick,&lt;&lt;"slave_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {mode,slave},
                     {watchdog,&lt;0.38208.0&gt;},
                     {event_relay,&lt;0.38199.0&gt;},
                     {server,&lt;&lt;"redis.localhost"&gt;&gt;},
                     {server_port,5222},
                     {server_host,"localhost"},
                     {component_port,5270},
                     {s2s_port,5269},
                     {master_nick,
                         &lt;&lt;"master_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {slave_nick,
                         &lt;&lt;"slave_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {room_subject,
                         &lt;&lt;"hello, world!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {certfile,
                         "/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd/test/ejabberd_SUITE_data/cert.pem"},
                     {persistent_room,true},
                     {anonymous,false},
                     {type,client},
                     {xmlns,&lt;&lt;"jabber:client"&gt;&gt;},
                     {ns_stream,&lt;&lt;"http://etherx.jabber.org/streams"&gt;&gt;},
                     {stream_version,{1,0}},
                     {stream_from,&lt;&lt;&gt;&gt;},
                     {db_xmlns,&lt;&lt;&gt;&gt;},
                     {lang,&lt;&lt;"en"&gt;&gt;},
                     {base_dir,
                         "/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd"},
                     {pubsub_node,&lt;&lt;"node!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {pubsub_node_title,
                         &lt;&lt;"title!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {master_resource,
                         &lt;&lt;"master_resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {slave_resource,
                         &lt;&lt;"slave_resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {update_sql,false},
                     {password,&lt;&lt;"password!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {backends,[mnesia,redis,mysql,pgsql,sqlite,ldap,extauth]},
                     {tc_logfile,
                         "/home/runner/work/ejabberd/ejabberd/_build/test/logs/ct_run.1697460461@597-weiss-master-df60818.2023-10-16_12.49.29/lib.ejabberd.logs/run.2023-10-16_12.49.30/ejabberd_suite.mam_query_rsm_before_slave.21106.html"},
                     {tc_group_properties,
                         [{name,mam_query_rsm_before},parallel]},
                     {tc_group_path,
                         [[{name,mam_master_slave},sequence],
                          [{name,redis},sequence]]},
                     {data_dir,
                         "/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd/test/ejabberd_SUITE_data/"},
                     {priv_dir,
                         "/home/runner/work/ejabberd/ejabberd/_build/test/logs/ct_run.1697460461@597-weiss-master-df60818.2023-10-16_12.49.29/lib.ejabberd.logs/run.2023-10-16_12.49.30/log_private/"}]
