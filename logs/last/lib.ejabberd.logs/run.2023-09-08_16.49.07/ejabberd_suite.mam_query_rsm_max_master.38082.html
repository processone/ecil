<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Test ejabberd_SUITE:mam_query_rsm_max_master result</title>
<meta http-equiv="cache-control" content="no-cache"></meta>
<meta http-equiv="content-type" content="text/html; charset=utf-8"></meta>
<link rel="stylesheet" href="../../ct_default.css" type="text/css"></link>
<script type="text/javascript" src="../../jquery-latest.js"></script>
<script type="text/javascript" src="../../jquery.tablesorter.min.js"></script>
</head>
<body>

<a name="top"></a><pre>
=== Test case: <a href="ejabberd_suite.src.html#mam_query_rsm_max_master-1">ejabberd_SUITE:mam_query_rsm_max_master/1</a> (click for source code)

=== Config value:

    [{event_relay,&lt;0.43350.0&gt;},
     {watchdog,&lt;0.43349.0&gt;},
     {server,&lt;&lt;"pgsql.localhost"&gt;&gt;},
     {server_port,5222},
     {server_host,"localhost"},
     {component_port,5270},
     {s2s_port,5269},
     {user,&lt;&lt;"test_single!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;},
     {nick,&lt;&lt;"nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {master_nick,&lt;&lt;"master_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {slave_nick,&lt;&lt;"slave_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {room_subject,&lt;&lt;"hello, world!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {certfile,"/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd/test/ejabberd_SUITE_data/cert.pem"},
     {persistent_room,true},
     {anonymous,false},
     {type,client},
     {xmlns,&lt;&lt;"jabber:client"&gt;&gt;},
     {ns_stream,&lt;&lt;"http://etherx.jabber.org/streams"&gt;&gt;},
     {stream_version,{1,0}},
     {stream_id,&lt;&lt;&gt;&gt;},
     {stream_from,&lt;&lt;&gt;&gt;},
     {db_xmlns,&lt;&lt;&gt;&gt;},
     {mechs,[]},
     {rosterver,false},
     {lang,&lt;&lt;"en"&gt;&gt;},
     {base_dir,"/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd"},
     {receiver,undefined},
     {pubsub_node,&lt;&lt;"node!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {pubsub_node_title,&lt;&lt;"title!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {resource,&lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {master_resource,&lt;&lt;"master_resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {slave_resource,&lt;&lt;"slave_resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {update_sql,false},
     {password,&lt;&lt;"password!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
     {backends,[mnesia,redis,mysql,pgsql,sqlite,ldap,extauth]},
     {tc_logfile,"/home/runner/work/ejabberd/ejabberd/_build/test/logs/ct_run.1694191642@566-badlop-master-7522c29.2023-09-08_16.49.06/lib.ejabberd.logs/run.2023-09-08_16.49.07/ejabberd_suite.mam_query_rsm_max_master.38082.html"},
     {tc_group_properties,[{name,mam_query_rsm_max},parallel]},
     {tc_group_path,[[{name,mam_master_slave},sequence],
                     [{name,pgsql},sequence]]},
     {data_dir,"/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd/test/ejabberd_SUITE_data/"},
     {priv_dir,"/home/runner/work/ejabberd/ejabberd/_build/test/logs/ct_run.1694191642@566-badlop-master-7522c29.2023-09-08_16.49.06/lib.ejabberd.logs/run.2023-09-08_16.49.07/log_private/"}]

=== Current directory is "/home/runner/work/ejabberd/ejabberd/_build/test/logs/ct_run.1694191642@566-badlop-master-7522c29.2023-09-08_16.49.06"

=== Started at 2023-09-08 16:56:32

<br />

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.104 ***</b><a id=e-58895 class="link-to-entry" href="#e-58895">&#x1f517;</a>
SENT:
&lt;stream:stream version='1.0'
               xml:lang='en'
               xmlns:stream='http://etherx.jabber.org/streams'
               to='pgsql.localhost'
               xmlns='jabber:client'/>

#stream_start{from = undefined,
              to = #jid{user = <<>>,server = <<"pgsql.localhost">>,
                        resource = <<>>,luser = <<>>,
                        lserver = <<"pgsql.localhost">>,lresource = <<>>},
              id = <<>>,
              version = {1,0},
              xmlns = <<"jabber:client">>,
              stream_xmlns = <<"http://etherx.jabber.org/streams">>,
              db_xmlns = <<>>,lang = <<"en">>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.106 ***</b><a id=e-58896 class="link-to-entry" href="#e-58896">&#x1f517;</a>
RECV:
&lt;stream:stream xmlns:stream='http://etherx.jabber.org/streams'
               xmlns='jabber:client'
               id='16524463633685094449'
               version='1.0'
               xml:lang='en'
               from='pgsql.localhost'/>

#stream_start{from = #jid{user = <<>>,server = <<"pgsql.localhost">>,
                          resource = <<>>,luser = <<>>,
                          lserver = <<"pgsql.localhost">>,lresource = <<>>},
              to = undefined,id = <<"16524463633685094449">>,
              version = {1,0},
              xmlns = <<"jabber:client">>,
              stream_xmlns = <<"http://etherx.jabber.org/streams">>,
              db_xmlns = <<>>,lang = <<"en">>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.106 ***</b><a id=e-58898 class="link-to-entry" href="#e-58898">&#x1f517;</a>
RECV:
&lt;stream:features>
  &lt;mechanisms xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>
    &lt;mechanism>DIGEST-MD5&lt;/mechanism>
    &lt;mechanism>PLAIN&lt;/mechanism>
    &lt;mechanism>SCRAM-SHA-512&lt;/mechanism>
    &lt;mechanism>SCRAM-SHA-256&lt;/mechanism>
    &lt;mechanism>SCRAM-SHA-1&lt;/mechanism>
    &lt;mechanism>X-OAUTH2&lt;/mechanism>
  &lt;/mechanisms>
  &lt;starttls xmlns='urn:ietf:params:xml:ns:xmpp-tls'/>
  &lt;register xmlns='http://jabber.org/features/iq-register'/>
  &lt;auth xmlns='http://jabber.org/features/iq-auth'/>
&lt;/stream:features>

#stream_features{
    sub_els =
        [#sasl_mechanisms{
             list =
                 [<<"DIGEST-MD5">>,<<"PLAIN">>,<<"SCRAM-SHA-512">>,
                  <<"SCRAM-SHA-256">>,<<"SCRAM-SHA-1">>,<<"X-OAUTH2">>]},
         #starttls{required = false},
         #feature_register{},
         #legacy_auth_feature{}]}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.106 ***</b><a id=e-58899 class="link-to-entry" href="#e-58899">&#x1f517;</a>
SENT:
&lt;auth mechanism='PLAIN'
      xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>dGVzdF9tYXN0ZXIhIyQlXiooKWB+Ky07Xz1bXXt9fFxAcGdzcWwubG9jYWxob3N0AHRlc3RfbWFzdGVyISMkJV4qKClgfistO189W117fXxcAHBhc3N3b3JkIUAjJCVeJiooKSciYH48PistLzs6Xz1bXXt9fFw=&lt;/auth>

#sasl_auth{mechanism = <<"PLAIN">>,
           text = <<116,101,115,116,95,109,97,115,116,101,114,33,35,36,37,94,
                    42,40,41,96,126,43,45,59,95,61,91,93,123,125,124,92,64,
                    112,103,115,113,108,46,108,111,99,97,108,104,111,115,116,
                    0,116,101,115,116,95,109,97,115,116,101,114,33,35,36,37,
                    94,42,40,41,96,126,43,45,59,95,61,91,93,123,125,124,92,0,
                    112,97,115,115,119,111,114,100,33,64,35,36,37,94,38,42,40,
                    41,39,34,96,126,60,62,43,45,47,59,58,95,61,91,93,123,125,
                    124,92>>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.108 ***</b><a id=e-58905 class="link-to-entry" href="#e-58905">&#x1f517;</a>
RECV:
&lt;success xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/>

#sasl_success{text = <<>>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.108 ***</b><a id=e-58906 class="link-to-entry" href="#e-58906">&#x1f517;</a>
SENT:
&lt;stream:stream version='1.0'
               xml:lang='en'
               xmlns:stream='http://etherx.jabber.org/streams'
               to='pgsql.localhost'
               xmlns='jabber:client'/>

#stream_start{from = undefined,
              to = #jid{user = <<>>,server = <<"pgsql.localhost">>,
                        resource = <<>>,luser = <<>>,
                        lserver = <<"pgsql.localhost">>,lresource = <<>>},
              id = <<>>,
              version = {1,0},
              xmlns = <<"jabber:client">>,
              stream_xmlns = <<"http://etherx.jabber.org/streams">>,
              db_xmlns = <<>>,lang = <<"en">>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.109 ***</b><a id=e-58909 class="link-to-entry" href="#e-58909">&#x1f517;</a>
RECV:
&lt;stream:stream xmlns:stream='http://etherx.jabber.org/streams'
               xmlns='jabber:client'
               id='17735386008032474001'
               version='1.0'
               xml:lang='en'
               from='pgsql.localhost'/>

#stream_start{from = #jid{user = <<>>,server = <<"pgsql.localhost">>,
                          resource = <<>>,luser = <<>>,
                          lserver = <<"pgsql.localhost">>,lresource = <<>>},
              to = undefined,id = <<"17735386008032474001">>,
              version = {1,0},
              xmlns = <<"jabber:client">>,
              stream_xmlns = <<"http://etherx.jabber.org/streams">>,
              db_xmlns = <<>>,lang = <<"en">>}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.110 ***</b><a id=e-58911 class="link-to-entry" href="#e-58911">&#x1f517;</a>
RECV:
&lt;stream:features>
  &lt;compression xmlns='http://jabber.org/features/compress'>
    &lt;method>zlib&lt;/method>
  &lt;/compression>
  &lt;bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'/>
  &lt;session xmlns='urn:ietf:params:xml:ns:xmpp-session'>
    &lt;optional/>
  &lt;/session>
  &lt;c xmlns='http://jabber.org/protocol/caps'
     ver='RsZUO/k2xwmyvdC8vIjQDsA1fow='
     node='http://www.process-one.net/en/ejabberd/'
     hash='sha-1'/>
  &lt;sm xmlns='urn:xmpp:sm:2'/>
  &lt;sm xmlns='urn:xmpp:sm:3'/>
  &lt;ver xmlns='urn:xmpp:features:rosterver'/>
&lt;/stream:features>

#stream_features{
    sub_els =
        [#compression{methods = [<<"zlib">>]},
         #bind{jid = undefined,resource = <<>>},
         #xmpp_session{optional = true},
         #caps{
             node = <<"http://www.process-one.net/en/ejabberd/">>,
             version = <<"RsZUO/k2xwmyvdC8vIjQDsA1fow=">>,hash = <<"sha-1">>,
             exts = []},
         #feature_sm{xmlns = <<"urn:xmpp:sm:2">>},
         #feature_sm{xmlns = <<"urn:xmpp:sm:3">>},
         #rosterver_feature{}]}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.111 ***</b><a id=e-58912 class="link-to-entry" href="#e-58912">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='9158158272271400201'
    xmlns='jabber:client'>
  &lt;bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'>
    &lt;resource>resource!@#$%^&*()'"`~&lt;>+-/;:_=[]{}|\&lt;/resource>
  &lt;/bind>
&lt;/iq>

#iq{id = <<"9158158272271400201">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els = [#bind{jid = undefined,
                     resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.113 ***</b><a id=e-58915 class="link-to-entry" href="#e-58915">&#x1f517;</a>
RECV:
&lt;iq type='result'
    id='9158158272271400201'>
  &lt;bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'>
    &lt;jid>test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&*()'"`~&lt;>+-/;:_=[]{}|\&lt;/jid>
  &lt;/bind>
&lt;/iq>

#iq{id = <<"9158158272271400201">>,type = result,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#bind{
             jid =
                 #jid{
                     user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                     server = <<"pgsql.localhost">>,
                     resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
                     luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                     lserver = <<"pgsql.localhost">>,
                     lresource =
                         <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
             resource = <<>>}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.114 ***</b><a id=e-58916 class="link-to-entry" href="#e-58916">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='15068674090038244769'
    xmlns='jabber:client'>
  &lt;prefs default='always'
         xmlns='urn:xmpp:mam:tmp'/>
&lt;/iq>

#iq{id = <<"15068674090038244769">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:tmp">>,default = always,
                          always = undefined,never = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.116 ***</b><a id=e-58919 class="link-to-entry" href="#e-58919">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='15068674090038244769'>
  &lt;prefs xmlns='urn:xmpp:mam:tmp'
         default='always'>
    &lt;always/>
    &lt;never/>
  &lt;/prefs>
&lt;/iq>

#iq{id = <<"15068674090038244769">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:tmp">>,default = always,
                          always = [],never = []}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.116 ***</b><a id=e-58920 class="link-to-entry" href="#e-58920">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='2457070507627293753'
    xmlns='jabber:client'>
  &lt;prefs default='always'
         xmlns='urn:xmpp:mam:0'/>
&lt;/iq>

#iq{id = <<"2457070507627293753">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:0">>,default = always,
                          always = undefined,never = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.118 ***</b><a id=e-58923 class="link-to-entry" href="#e-58923">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='2457070507627293753'>
  &lt;prefs xmlns='urn:xmpp:mam:0'
         default='always'>
    &lt;always/>
    &lt;never/>
  &lt;/prefs>
&lt;/iq>

#iq{id = <<"2457070507627293753">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:0">>,default = always,
                          always = [],never = []}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.118 ***</b><a id=e-58924 class="link-to-entry" href="#e-58924">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='2706227087751359455'
    xmlns='jabber:client'>
  &lt;prefs default='always'
         xmlns='urn:xmpp:mam:1'/>
&lt;/iq>

#iq{id = <<"2706227087751359455">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:1">>,default = always,
                          always = undefined,never = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.119 ***</b><a id=e-58927 class="link-to-entry" href="#e-58927">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='2706227087751359455'>
  &lt;prefs xmlns='urn:xmpp:mam:1'
         default='always'>
    &lt;always/>
    &lt;never/>
  &lt;/prefs>
&lt;/iq>

#iq{id = <<"2706227087751359455">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:1">>,default = always,
                          always = [],never = []}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.120 ***</b><a id=e-58928 class="link-to-entry" href="#e-58928">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='16627665172158181026'
    xmlns='jabber:client'>
  &lt;prefs default='always'
         xmlns='urn:xmpp:mam:2'/>
&lt;/iq>

#iq{id = <<"16627665172158181026">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:2">>,default = always,
                          always = undefined,never = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.121 ***</b><a id=e-58931 class="link-to-entry" href="#e-58931">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='16627665172158181026'>
  &lt;prefs xmlns='urn:xmpp:mam:2'
         default='always'>
    &lt;always/>
    &lt;never/>
  &lt;/prefs>
&lt;/iq>

#iq{id = <<"16627665172158181026">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_prefs{xmlns = <<"urn:xmpp:mam:2">>,default = always,
                          always = [],never = []}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.121 ***</b><a id=e-58932 class="link-to-entry" href="#e-58932">&#x1f517;</a>
SENT:
&lt;presence id='7654887865843501791'
          xmlns='jabber:client'/>

#presence{id = <<"7654887865843501791">>,type = available,lang = <<>>,
          from = undefined,to = undefined,show = undefined,status = [],
          priority = undefined,sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.125 ***</b><a id=e-58934 class="link-to-entry" href="#e-58934">&#x1f517;</a>
RECV:
&lt;presence xml:lang='en'
          to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
          from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
          id='7654887865843501791'>
  &lt;x xmlns='vcard-temp:x:update'/>
&lt;/presence>

#presence{id = <<"7654887865843501791">>,type = available,lang = <<"en">>,
          from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                      server = <<"pgsql.localhost">>,
                      resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
                      luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                      lserver = <<"pgsql.localhost">>,
                      lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
          to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                    server = <<"pgsql.localhost">>,
                    resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
                    luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                    lserver = <<"pgsql.localhost">>,
                    lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
          show = undefined,status = [],priority = undefined,
          sub_els = [#vcard_xupdate{hash = undefined}],
          meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.125 ***</b><a id=e-58935 class="link-to-entry" href="#e-58935">&#x1f517;</a>
SENT:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         id='15284347942385827480'
         xmlns='jabber:client'>
  &lt;body xml:lang='en'>1&lt;/body>
&lt;/message>

#message{id = <<"15284347942385827480">>,type = normal,lang = <<>>,
         from = undefined,
         to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                   server = <<"pgsql.localhost">>,
                   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
                   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                   lserver = <<"pgsql.localhost">>,
                   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
         subject = [],
         body = [#text{lang = <<"en">>,data = <<"1">>}],
         thread = undefined,sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.126 ***</b><a id=e-58936 class="link-to-entry" href="#e-58936">&#x1f517;</a>
SENT:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         id='1329357822099986464'
         xmlns='jabber:client'>
  &lt;body xml:lang='en'>2&lt;/body>
&lt;/message>

#message{id = <<"1329357822099986464">>,type = normal,lang = <<>>,
         from = undefined,
         to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                   server = <<"pgsql.localhost">>,
                   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
                   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                   lserver = <<"pgsql.localhost">>,
                   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
         subject = [],
         body = [#text{lang = <<"en">>,data = <<"2">>}],
         thread = undefined,sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.126 ***</b><a id=e-58937 class="link-to-entry" href="#e-58937">&#x1f517;</a>
SENT:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         id='11573210961884119062'
         xmlns='jabber:client'>
  &lt;body xml:lang='en'>3&lt;/body>
&lt;/message>

#message{id = <<"11573210961884119062">>,type = normal,lang = <<>>,
         from = undefined,
         to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                   server = <<"pgsql.localhost">>,
                   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
                   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                   lserver = <<"pgsql.localhost">>,
                   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
         subject = [],
         body = [#text{lang = <<"en">>,data = <<"3">>}],
         thread = undefined,sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.127 ***</b><a id=e-58938 class="link-to-entry" href="#e-58938">&#x1f517;</a>
SENT:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         id='17371794499241707619'
         xmlns='jabber:client'>
  &lt;body xml:lang='en'>4&lt;/body>
&lt;/message>

#message{id = <<"17371794499241707619">>,type = normal,lang = <<>>,
         from = undefined,
         to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                   server = <<"pgsql.localhost">>,
                   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
                   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                   lserver = <<"pgsql.localhost">>,
                   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
         subject = [],
         body = [#text{lang = <<"en">>,data = <<"4">>}],
         thread = undefined,sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.127 ***</b><a id=e-58939 class="link-to-entry" href="#e-58939">&#x1f517;</a>
SENT:
&lt;message to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         id='17865558756670531820'
         xmlns='jabber:client'>
  &lt;body xml:lang='en'>5&lt;/body>
&lt;/message>

#message{id = <<"17865558756670531820">>,type = normal,lang = <<>>,
         from = undefined,
         to = #jid{user = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                   server = <<"pgsql.localhost">>,
                   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
                   luser = <<"test_slave!#$%^*()`~+-;_=[]{}|\\">>,
                   lserver = <<"pgsql.localhost">>,
                   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
         subject = [],
         body = [#text{lang = <<"en">>,data = <<"5">>}],
         thread = undefined,sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.127 ***</b><a id=e-58940 class="link-to-entry" href="#e-58940">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='11006978297747347325'
    xmlns='jabber:client'>
  &lt;query queryid='2070083069075787130'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>0&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"11006978297747347325">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"2070083069075787130">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 0},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.179 ***</b><a id=e-58947 class="link-to-entry" href="#e-58947">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='11006978297747347325'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='2070083069075787130'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"11006978297747347325">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"2070083069075787130">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first = undefined,index = undefined,last = undefined,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.179 ***</b><a id=e-58948 class="link-to-entry" href="#e-58948">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='3887219936860843292'
    xmlns='jabber:client'>
  &lt;query queryid='2797768738810330098'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>1&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"3887219936860843292">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"2797768738810330098">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 1},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.181 ***</b><a id=e-58951 class="link-to-entry" href="#e-58951">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192125906'
          queryid='2797768738810330098'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"2797768738810330098">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.181 ***</b><a id=e-58952 class="link-to-entry" href="#e-58952">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='3887219936860843292'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='2797768738810330098'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192125906&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"3887219936860843292">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"2797768738810330098">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192125906">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.181 ***</b><a id=e-58955 class="link-to-entry" href="#e-58955">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='2314835247444335189'
    xmlns='jabber:client'>
  &lt;query queryid='12014506277552143507'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>2&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"2314835247444335189">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"12014506277552143507">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 2},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.184 ***</b><a id=e-58957 class="link-to-entry" href="#e-58957">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192125906'
          queryid='12014506277552143507'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"12014506277552143507">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.184 ***</b><a id=e-58959 class="link-to-entry" href="#e-58959">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192169473'
          queryid='12014506277552143507'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"12014506277552143507">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.185 ***</b><a id=e-58962 class="link-to-entry" href="#e-58962">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='2314835247444335189'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='12014506277552143507'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192169473&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"2314835247444335189">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"12014506277552143507">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192169473">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.185 ***</b><a id=e-58963 class="link-to-entry" href="#e-58963">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='14957814970298481219'
    xmlns='jabber:client'>
  &lt;query queryid='640035673550482493'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>3&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"14957814970298481219">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"640035673550482493">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 3},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.188 ***</b><a id=e-58966 class="link-to-entry" href="#e-58966">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192125906'
          queryid='640035673550482493'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"640035673550482493">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.188 ***</b><a id=e-58969 class="link-to-entry" href="#e-58969">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192169473'
          queryid='640035673550482493'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"640035673550482493">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.189 ***</b><a id=e-58972 class="link-to-entry" href="#e-58972">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192170804'
          queryid='640035673550482493'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"640035673550482493">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.189 ***</b><a id=e-58973 class="link-to-entry" href="#e-58973">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='14957814970298481219'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='640035673550482493'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192170804&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"14957814970298481219">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"640035673550482493">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192170804">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.190 ***</b><a id=e-58974 class="link-to-entry" href="#e-58974">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='751527823180679587'
    xmlns='jabber:client'>
  &lt;query queryid='8398957527984373752'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>4&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"751527823180679587">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"8398957527984373752">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 4},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.193 ***</b><a id=e-58978 class="link-to-entry" href="#e-58978">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192125906'
          queryid='8398957527984373752'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"8398957527984373752">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.193 ***</b><a id=e-58979 class="link-to-entry" href="#e-58979">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192169473'
          queryid='8398957527984373752'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"8398957527984373752">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.194 ***</b><a id=e-58981 class="link-to-entry" href="#e-58981">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192170804'
          queryid='8398957527984373752'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"8398957527984373752">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.194 ***</b><a id=e-58984 class="link-to-entry" href="#e-58984">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192171900'
          queryid='8398957527984373752'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"8398957527984373752">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.194 ***</b><a id=e-58985 class="link-to-entry" href="#e-58985">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='751527823180679587'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='8398957527984373752'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192171900&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"751527823180679587">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"8398957527984373752">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192171900">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.194 ***</b><a id=e-58986 class="link-to-entry" href="#e-58986">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='11245381456629126501'
    xmlns='jabber:client'>
  &lt;query queryid='9351721804186785752'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>5&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"11245381456629126501">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"9351721804186785752">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 5},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.198 ***</b><a id=e-58988 class="link-to-entry" href="#e-58988">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192125906'
          queryid='9351721804186785752'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"9351721804186785752">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.199 ***</b><a id=e-58990 class="link-to-entry" href="#e-58990">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192169473'
          queryid='9351721804186785752'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"9351721804186785752">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.199 ***</b><a id=e-58992 class="link-to-entry" href="#e-58992">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192170804'
          queryid='9351721804186785752'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"9351721804186785752">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.200 ***</b><a id=e-58994 class="link-to-entry" href="#e-58994">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192171900'
          queryid='9351721804186785752'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"9351721804186785752">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.200 ***</b><a id=e-58995 class="link-to-entry" href="#e-58995">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192173422'
          queryid='9351721804186785752'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17865558756670531820'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192173422'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192173422'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.173422Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"9351721804186785752">>,
    id = <<"1694192192173422">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,173422},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17865558756670531820">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.200 ***</b><a id=e-58997 class="link-to-entry" href="#e-58997">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='11245381456629126501'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='9351721804186785752'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192173422&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"11245381456629126501">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"9351721804186785752">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192173422">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.200 ***</b><a id=e-58998 class="link-to-entry" href="#e-58998">&#x1f517;</a>
SENT:
&lt;iq type='get'
    id='7087939689310754035'
    xmlns='jabber:client'>
  &lt;query queryid='4635927292930650202'
         xmlns='urn:xmpp:mam:tmp'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>6&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"7087939689310754035">>,type = get,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"4635927292930650202">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 6},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.203 ***</b><a id=e-59001 class="link-to-entry" href="#e-59001">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192125906'
          queryid='4635927292930650202'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"4635927292930650202">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.204 ***</b><a id=e-59003 class="link-to-entry" href="#e-59003">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192169473'
          queryid='4635927292930650202'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"4635927292930650202">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.204 ***</b><a id=e-59004 class="link-to-entry" href="#e-59004">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192170804'
          queryid='4635927292930650202'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"4635927292930650202">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.204 ***</b><a id=e-59006 class="link-to-entry" href="#e-59006">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192171900'
          queryid='4635927292930650202'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"4635927292930650202">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.205 ***</b><a id=e-59008 class="link-to-entry" href="#e-59008">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:tmp'
          id='1694192192173422'
          queryid='4635927292930650202'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17865558756670531820'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192173422'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192173422'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.173422Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:tmp">>,queryid = <<"4635927292930650202">>,
    id = <<"1694192192173422">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,173422},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17865558756670531820">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.205 ***</b><a id=e-59009 class="link-to-entry" href="#e-59009">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='7087939689310754035'>
  &lt;query xmlns='urn:xmpp:mam:tmp'
         queryid='4635927292930650202'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192173422&lt;/last>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"7087939689310754035">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:tmp">>,id = <<"4635927292930650202">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192173422">>,
                     max = undefined},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.205 ***</b><a id=e-59011 class="link-to-entry" href="#e-59011">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='2154477177154030235'
    xmlns='jabber:client'>
  &lt;query queryid='15599930157952175354'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>0&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"2154477177154030235">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"15599930157952175354">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 0},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.207 ***</b><a id=e-59015 class="link-to-entry" href="#e-59015">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='2154477177154030235'/>

#iq{id = <<"2154477177154030235">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.208 ***</b><a id=e-59016 class="link-to-entry" href="#e-59016">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='false'
       queryid='15599930157952175354'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"15599930157952175354">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first = undefined,index = undefined,last = undefined,
                     max = undefined},
             stable = undefined,complete = false},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.208 ***</b><a id=e-59017 class="link-to-entry" href="#e-59017">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='13452958201652169068'
    xmlns='jabber:client'>
  &lt;query queryid='10228696823375696288'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>1&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"13452958201652169068">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"10228696823375696288">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 1},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.211 ***</b><a id=e-59021 class="link-to-entry" href="#e-59021">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='13452958201652169068'/>

#iq{id = <<"13452958201652169068">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.211 ***</b><a id=e-59022 class="link-to-entry" href="#e-59022">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192125906'
          queryid='10228696823375696288'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"10228696823375696288">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.212 ***</b><a id=e-59023 class="link-to-entry" href="#e-59023">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='false'
       queryid='10228696823375696288'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192125906&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"10228696823375696288">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192125906">>,
                     max = undefined},
             stable = undefined,complete = false},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.212 ***</b><a id=e-59024 class="link-to-entry" href="#e-59024">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='15241891715863879277'
    xmlns='jabber:client'>
  &lt;query queryid='5156872529669603293'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>2&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"15241891715863879277">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"5156872529669603293">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 2},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.216 ***</b><a id=e-59029 class="link-to-entry" href="#e-59029">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='15241891715863879277'/>

#iq{id = <<"15241891715863879277">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.217 ***</b><a id=e-59030 class="link-to-entry" href="#e-59030">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192125906'
          queryid='5156872529669603293'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"5156872529669603293">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.218 ***</b><a id=e-59031 class="link-to-entry" href="#e-59031">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192169473'
          queryid='5156872529669603293'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"5156872529669603293">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.218 ***</b><a id=e-59032 class="link-to-entry" href="#e-59032">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='false'
       queryid='5156872529669603293'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192169473&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"5156872529669603293">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192169473">>,
                     max = undefined},
             stable = undefined,complete = false},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.218 ***</b><a id=e-59033 class="link-to-entry" href="#e-59033">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='10392682349357924901'
    xmlns='jabber:client'>
  &lt;query queryid='813164589681416799'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>3&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"10392682349357924901">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"813164589681416799">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 3},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.232 ***</b><a id=e-59052 class="link-to-entry" href="#e-59052">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='10392682349357924901'/>

#iq{id = <<"10392682349357924901">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.232 ***</b><a id=e-59053 class="link-to-entry" href="#e-59053">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192125906'
          queryid='813164589681416799'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"813164589681416799">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.233 ***</b><a id=e-59054 class="link-to-entry" href="#e-59054">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192169473'
          queryid='813164589681416799'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"813164589681416799">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.233 ***</b><a id=e-59055 class="link-to-entry" href="#e-59055">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192170804'
          queryid='813164589681416799'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"813164589681416799">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.233 ***</b><a id=e-59056 class="link-to-entry" href="#e-59056">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='false'
       queryid='813164589681416799'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192170804&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"813164589681416799">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192170804">>,
                     max = undefined},
             stable = undefined,complete = false},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.234 ***</b><a id=e-59057 class="link-to-entry" href="#e-59057">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='1213236563586571318'
    xmlns='jabber:client'>
  &lt;query queryid='13998351324497478521'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>4&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"1213236563586571318">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"13998351324497478521">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 4},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.241 ***</b><a id=e-59066 class="link-to-entry" href="#e-59066">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='1213236563586571318'/>

#iq{id = <<"1213236563586571318">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.242 ***</b><a id=e-59067 class="link-to-entry" href="#e-59067">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192125906'
          queryid='13998351324497478521'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"13998351324497478521">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.242 ***</b><a id=e-59068 class="link-to-entry" href="#e-59068">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192169473'
          queryid='13998351324497478521'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"13998351324497478521">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.242 ***</b><a id=e-59069 class="link-to-entry" href="#e-59069">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192170804'
          queryid='13998351324497478521'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"13998351324497478521">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.242 ***</b><a id=e-59070 class="link-to-entry" href="#e-59070">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192171900'
          queryid='13998351324497478521'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"13998351324497478521">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.243 ***</b><a id=e-59071 class="link-to-entry" href="#e-59071">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='false'
       queryid='13998351324497478521'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192171900&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"13998351324497478521">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192171900">>,
                     max = undefined},
             stable = undefined,complete = false},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.243 ***</b><a id=e-59072 class="link-to-entry" href="#e-59072">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='15334205439280173922'
    xmlns='jabber:client'>
  &lt;query queryid='17402287448309353949'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>5&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"15334205439280173922">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"17402287448309353949">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 5},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.249 ***</b><a id=e-59081 class="link-to-entry" href="#e-59081">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='15334205439280173922'/>

#iq{id = <<"15334205439280173922">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.250 ***</b><a id=e-59082 class="link-to-entry" href="#e-59082">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192125906'
          queryid='17402287448309353949'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"17402287448309353949">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.250 ***</b><a id=e-59083 class="link-to-entry" href="#e-59083">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192169473'
          queryid='17402287448309353949'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"17402287448309353949">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.250 ***</b><a id=e-59084 class="link-to-entry" href="#e-59084">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192170804'
          queryid='17402287448309353949'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"17402287448309353949">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.251 ***</b><a id=e-59087 class="link-to-entry" href="#e-59087">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192171900'
          queryid='17402287448309353949'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"17402287448309353949">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.251 ***</b><a id=e-59088 class="link-to-entry" href="#e-59088">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192173422'
          queryid='17402287448309353949'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17865558756670531820'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192173422'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192173422'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.173422Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"17402287448309353949">>,
    id = <<"1694192192173422">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,173422},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17865558756670531820">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.252 ***</b><a id=e-59089 class="link-to-entry" href="#e-59089">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='true'
       queryid='17402287448309353949'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192173422&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"17402287448309353949">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192173422">>,
                     max = undefined},
             stable = undefined,complete = true},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.252 ***</b><a id=e-59090 class="link-to-entry" href="#e-59090">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='5039771470103990882'
    xmlns='jabber:client'>
  &lt;query queryid='552092527656833710'
         xmlns='urn:xmpp:mam:0'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>6&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"5039771470103990882">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"552092527656833710">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 6},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.254 ***</b><a id=e-59093 class="link-to-entry" href="#e-59093">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='5039771470103990882'/>

#iq{id = <<"5039771470103990882">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [],meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.255 ***</b><a id=e-59095 class="link-to-entry" href="#e-59095">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192125906'
          queryid='552092527656833710'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"552092527656833710">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.255 ***</b><a id=e-59096 class="link-to-entry" href="#e-59096">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192169473'
          queryid='552092527656833710'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"552092527656833710">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.255 ***</b><a id=e-59097 class="link-to-entry" href="#e-59097">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192170804'
          queryid='552092527656833710'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"552092527656833710">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.256 ***</b><a id=e-59098 class="link-to-entry" href="#e-59098">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192171900'
          queryid='552092527656833710'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"552092527656833710">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.256 ***</b><a id=e-59099 class="link-to-entry" href="#e-59099">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:0'
          id='1694192192173422'
          queryid='552092527656833710'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17865558756670531820'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192173422'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192173422'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.173422Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:0">>,queryid = <<"552092527656833710">>,
    id = <<"1694192192173422">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,173422},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17865558756670531820">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.256 ***</b><a id=e-59100 class="link-to-entry" href="#e-59100">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;fin xmlns='urn:xmpp:mam:0'
       complete='true'
       queryid='552092527656833710'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192173422&lt;/last>
    &lt;/set>
  &lt;/fin>
  &lt;no-store xmlns='urn:xmpp:hints'/>
&lt;/message>

#message{
    id = <<>>,type = normal,lang = <<>>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    subject = [],body = [],thread = undefined,
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:0">>,id = <<"552092527656833710">>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192173422">>,
                     max = undefined},
             stable = undefined,complete = true},
         #hint{type = 'no-store'}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.257 ***</b><a id=e-59101 class="link-to-entry" href="#e-59101">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='9274876229683224354'
    xmlns='jabber:client'>
  &lt;query queryid='8096766580779309935'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>0&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"9274876229683224354">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"8096766580779309935">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 0},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.258 ***</b><a id=e-59106 class="link-to-entry" href="#e-59106">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='9274876229683224354'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"9274876229683224354">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_fin{xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
                        rsm = #rsm_set{'after' = undefined,before = undefined,
                                       count = 5,first = undefined,
                                       index = undefined,last = undefined,
                                       max = undefined},
                        stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.259 ***</b><a id=e-59107 class="link-to-entry" href="#e-59107">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='17664797472752480517'
    xmlns='jabber:client'>
  &lt;query queryid='18272089738839059981'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>1&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"17664797472752480517">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"18272089738839059981">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 1},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.260 ***</b><a id=e-59110 class="link-to-entry" href="#e-59110">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192125906'
          queryid='18272089738839059981'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"18272089738839059981">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.261 ***</b><a id=e-59111 class="link-to-entry" href="#e-59111">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='17664797472752480517'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192125906&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"17664797472752480517">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192125906">>,
                     max = undefined},
             stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.261 ***</b><a id=e-59113 class="link-to-entry" href="#e-59113">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='8953333785603826263'
    xmlns='jabber:client'>
  &lt;query queryid='6744221912657952249'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>2&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"8953333785603826263">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"6744221912657952249">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 2},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.264 ***</b><a id=e-59116 class="link-to-entry" href="#e-59116">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192125906'
          queryid='6744221912657952249'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"6744221912657952249">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.265 ***</b><a id=e-59118 class="link-to-entry" href="#e-59118">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192169473'
          queryid='6744221912657952249'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"6744221912657952249">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.265 ***</b><a id=e-59119 class="link-to-entry" href="#e-59119">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='8953333785603826263'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192169473&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"8953333785603826263">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192169473">>,
                     max = undefined},
             stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.266 ***</b><a id=e-59121 class="link-to-entry" href="#e-59121">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='10812032587498150282'
    xmlns='jabber:client'>
  &lt;query queryid='5909207197061854757'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>3&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"10812032587498150282">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"5909207197061854757">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 3},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.268 ***</b><a id=e-59126 class="link-to-entry" href="#e-59126">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192125906'
          queryid='5909207197061854757'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"5909207197061854757">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.268 ***</b><a id=e-59127 class="link-to-entry" href="#e-59127">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192169473'
          queryid='5909207197061854757'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"5909207197061854757">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.269 ***</b><a id=e-59128 class="link-to-entry" href="#e-59128">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192170804'
          queryid='5909207197061854757'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"5909207197061854757">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.270 ***</b><a id=e-59129 class="link-to-entry" href="#e-59129">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='10812032587498150282'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192170804&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"10812032587498150282">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192170804">>,
                     max = undefined},
             stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.275 ***</b><a id=e-59136 class="link-to-entry" href="#e-59136">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='7721087428313298280'
    xmlns='jabber:client'>
  &lt;query queryid='10999670383159464509'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>4&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"7721087428313298280">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"10999670383159464509">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 4},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.278 ***</b><a id=e-59140 class="link-to-entry" href="#e-59140">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192125906'
          queryid='10999670383159464509'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"10999670383159464509">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.279 ***</b><a id=e-59142 class="link-to-entry" href="#e-59142">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192169473'
          queryid='10999670383159464509'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"10999670383159464509">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.279 ***</b><a id=e-59143 class="link-to-entry" href="#e-59143">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192170804'
          queryid='10999670383159464509'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"10999670383159464509">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.280 ***</b><a id=e-59146 class="link-to-entry" href="#e-59146">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192171900'
          queryid='10999670383159464509'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"10999670383159464509">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.280 ***</b><a id=e-59148 class="link-to-entry" href="#e-59148">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='7721087428313298280'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192171900&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"7721087428313298280">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192171900">>,
                     max = undefined},
             stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.280 ***</b><a id=e-59150 class="link-to-entry" href="#e-59150">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='9196767884210039655'
    xmlns='jabber:client'>
  &lt;query queryid='8839353473721577123'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>5&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"9196767884210039655">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"8839353473721577123">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 5},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.283 ***</b><a id=e-59153 class="link-to-entry" href="#e-59153">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192125906'
          queryid='8839353473721577123'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"8839353473721577123">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.284 ***</b><a id=e-59154 class="link-to-entry" href="#e-59154">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192169473'
          queryid='8839353473721577123'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"8839353473721577123">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.284 ***</b><a id=e-59155 class="link-to-entry" href="#e-59155">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192170804'
          queryid='8839353473721577123'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"8839353473721577123">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.284 ***</b><a id=e-59156 class="link-to-entry" href="#e-59156">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192171900'
          queryid='8839353473721577123'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"8839353473721577123">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.285 ***</b><a id=e-59158 class="link-to-entry" href="#e-59158">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192173422'
          queryid='8839353473721577123'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17865558756670531820'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192173422'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192173422'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.173422Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"8839353473721577123">>,
    id = <<"1694192192173422">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,173422},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17865558756670531820">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.285 ***</b><a id=e-59159 class="link-to-entry" href="#e-59159">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='9196767884210039655'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192173422&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"9196767884210039655">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192173422">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.286 ***</b><a id=e-59161 class="link-to-entry" href="#e-59161">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='14613849631169791875'
    xmlns='jabber:client'>
  &lt;query queryid='5431034450056659309'
         xmlns='urn:xmpp:mam:1'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>6&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"14613849631169791875">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<"5431034450056659309">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 6},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.288 ***</b><a id=e-59163 class="link-to-entry" href="#e-59163">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192125906'
          queryid='5431034450056659309'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"5431034450056659309">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.289 ***</b><a id=e-59165 class="link-to-entry" href="#e-59165">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192169473'
          queryid='5431034450056659309'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"5431034450056659309">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.289 ***</b><a id=e-59168 class="link-to-entry" href="#e-59168">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192170804'
          queryid='5431034450056659309'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"5431034450056659309">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.290 ***</b><a id=e-59170 class="link-to-entry" href="#e-59170">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192171900'
          queryid='5431034450056659309'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"5431034450056659309">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.290 ***</b><a id=e-59171 class="link-to-entry" href="#e-59171">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:1'
          id='1694192192173422'
          queryid='5431034450056659309'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17865558756670531820'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192173422'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192173422'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.173422Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:1">>,queryid = <<"5431034450056659309">>,
    id = <<"1694192192173422">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,173422},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17865558756670531820">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.290 ***</b><a id=e-59172 class="link-to-entry" href="#e-59172">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='14613849631169791875'>
  &lt;fin xmlns='urn:xmpp:mam:1'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192173422&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"14613849631169791875">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:1">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192173422">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.291 ***</b><a id=e-59173 class="link-to-entry" href="#e-59173">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='10841186870266967655'
    xmlns='jabber:client'>
  &lt;query queryid='9205586769715229413'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>0&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"10841186870266967655">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"9205586769715229413">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 0},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.293 ***</b><a id=e-59178 class="link-to-entry" href="#e-59178">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='10841186870266967655'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"10841186870266967655">>,type = result,lang = <<"en">>,
    from = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                server = <<"pgsql.localhost">>,resource = <<>>,
                luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
                lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to = #jid{user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              server = <<"pgsql.localhost">>,
              resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
              luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
              lserver = <<"pgsql.localhost">>,
              lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els = [#mam_fin{xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
                        rsm = #rsm_set{'after' = undefined,before = undefined,
                                       count = 5,first = undefined,
                                       index = undefined,last = undefined,
                                       max = undefined},
                        stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.293 ***</b><a id=e-59180 class="link-to-entry" href="#e-59180">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='9976914201006334113'
    xmlns='jabber:client'>
  &lt;query queryid='257879812742144876'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>1&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"9976914201006334113">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"257879812742144876">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 1},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.295 ***</b><a id=e-59181 class="link-to-entry" href="#e-59181">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192125906'
          queryid='257879812742144876'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"257879812742144876">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.296 ***</b><a id=e-59182 class="link-to-entry" href="#e-59182">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='9976914201006334113'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192125906&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"9976914201006334113">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192125906">>,
                     max = undefined},
             stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.296 ***</b><a id=e-59183 class="link-to-entry" href="#e-59183">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='2277119464631749699'
    xmlns='jabber:client'>
  &lt;query queryid='8176893573318407133'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>2&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"2277119464631749699">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"8176893573318407133">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 2},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.299 ***</b><a id=e-59190 class="link-to-entry" href="#e-59190">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192125906'
          queryid='8176893573318407133'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"8176893573318407133">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.300 ***</b><a id=e-59191 class="link-to-entry" href="#e-59191">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192169473'
          queryid='8176893573318407133'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"8176893573318407133">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.300 ***</b><a id=e-59192 class="link-to-entry" href="#e-59192">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='2277119464631749699'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192169473&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"2277119464631749699">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192169473">>,
                     max = undefined},
             stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.300 ***</b><a id=e-59193 class="link-to-entry" href="#e-59193">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='5962743536439250969'
    xmlns='jabber:client'>
  &lt;query queryid='16659208785923643608'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>3&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"5962743536439250969">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"16659208785923643608">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 3},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.303 ***</b><a id=e-59198 class="link-to-entry" href="#e-59198">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192125906'
          queryid='16659208785923643608'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"16659208785923643608">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.304 ***</b><a id=e-59201 class="link-to-entry" href="#e-59201">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192169473'
          queryid='16659208785923643608'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"16659208785923643608">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.304 ***</b><a id=e-59203 class="link-to-entry" href="#e-59203">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192170804'
          queryid='16659208785923643608'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"16659208785923643608">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.304 ***</b><a id=e-59204 class="link-to-entry" href="#e-59204">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='5962743536439250969'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192170804&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"5962743536439250969">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192170804">>,
                     max = undefined},
             stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.305 ***</b><a id=e-59205 class="link-to-entry" href="#e-59205">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='12626428820013067858'
    xmlns='jabber:client'>
  &lt;query queryid='2842509981883437503'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>4&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"12626428820013067858">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"2842509981883437503">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 4},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.308 ***</b><a id=e-59207 class="link-to-entry" href="#e-59207">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192125906'
          queryid='2842509981883437503'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"2842509981883437503">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.308 ***</b><a id=e-59209 class="link-to-entry" href="#e-59209">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192169473'
          queryid='2842509981883437503'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"2842509981883437503">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.309 ***</b><a id=e-59212 class="link-to-entry" href="#e-59212">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192170804'
          queryid='2842509981883437503'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"2842509981883437503">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.309 ***</b><a id=e-59214 class="link-to-entry" href="#e-59214">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192171900'
          queryid='2842509981883437503'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"2842509981883437503">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.309 ***</b><a id=e-59216 class="link-to-entry" href="#e-59216">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='12626428820013067858'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='false'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192171900&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"12626428820013067858">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192171900">>,
                     max = undefined},
             stable = undefined,complete = false}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.313 ***</b><a id=e-59217 class="link-to-entry" href="#e-59217">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='10157012304368576579'
    xmlns='jabber:client'>
  &lt;query queryid='674612497188240519'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>5&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"10157012304368576579">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"674612497188240519">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 5},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.317 ***</b><a id=e-59218 class="link-to-entry" href="#e-59218">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192125906'
          queryid='674612497188240519'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"674612497188240519">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.317 ***</b><a id=e-59219 class="link-to-entry" href="#e-59219">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192169473'
          queryid='674612497188240519'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"674612497188240519">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.318 ***</b><a id=e-59220 class="link-to-entry" href="#e-59220">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192170804'
          queryid='674612497188240519'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"674612497188240519">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.318 ***</b><a id=e-59221 class="link-to-entry" href="#e-59221">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192171900'
          queryid='674612497188240519'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"674612497188240519">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.318 ***</b><a id=e-59222 class="link-to-entry" href="#e-59222">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192173422'
          queryid='674612497188240519'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17865558756670531820'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192173422'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192173422'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.173422Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"674612497188240519">>,
    id = <<"1694192192173422">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,173422},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17865558756670531820">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.319 ***</b><a id=e-59223 class="link-to-entry" href="#e-59223">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='10157012304368576579'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192173422&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"10157012304368576579">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192173422">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.319 ***</b><a id=e-59224 class="link-to-entry" href="#e-59224">&#x1f517;</a>
SENT:
&lt;iq type='set'
    id='10108492427838770489'
    xmlns='jabber:client'>
  &lt;query queryid='3237477585357991854'
         xmlns='urn:xmpp:mam:2'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;max>6&lt;/max>
    &lt;/set>
  &lt;/query>
&lt;/iq>

#iq{id = <<"10108492427838770489">>,type = set,lang = <<>>,from = undefined,
    to = undefined,
    sub_els =
        [#mam_query{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<"3237477585357991854">>,
             start = undefined,'end' = undefined,with = undefined,
             withtext = undefined,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = undefined,
                     first = undefined,index = undefined,last = undefined,
                     max = 6},
             flippage = false,xdata = undefined}],
    meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.324 ***</b><a id=e-59225 class="link-to-entry" href="#e-59225">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192125906'
          queryid='3237477585357991854'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='15284347942385827480'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192125906'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192125906'/>
        &lt;body xml:lang='en'>1&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.125906Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"3237477585357991854">>,
    id = <<"1694192192125906">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,125906},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"15284347942385827480">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192125906">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"1">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.325 ***</b><a id=e-59226 class="link-to-entry" href="#e-59226">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192169473'
          queryid='3237477585357991854'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='1329357822099986464'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192169473'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192169473'/>
        &lt;body xml:lang='en'>2&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.169473Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"3237477585357991854">>,
    id = <<"1694192192169473">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,169473},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"1329357822099986464">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192169473">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"2">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.325 ***</b><a id=e-59227 class="link-to-entry" href="#e-59227">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192170804'
          queryid='3237477585357991854'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='11573210961884119062'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192170804'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192170804'/>
        &lt;body xml:lang='en'>3&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.170804Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"3237477585357991854">>,
    id = <<"1694192192170804">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,170804},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"11573210961884119062">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192170804">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"3">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.325 ***</b><a id=e-59228 class="link-to-entry" href="#e-59228">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192171900'
          queryid='3237477585357991854'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17371794499241707619'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192171900'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192171900'/>
        &lt;body xml:lang='en'>4&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.171900Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"3237477585357991854">>,
    id = <<"1694192192171900">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,171900},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17371794499241707619">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192171900">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"4">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.325 ***</b><a id=e-59229 class="link-to-entry" href="#e-59229">&#x1f517;</a>
RECV:
&lt;message to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
         from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'>
  &lt;result xmlns='urn:xmpp:mam:2'
          id='1694192192173422'
          queryid='3237477585357991854'>
    &lt;forwarded xmlns='urn:xmpp:forward:0'>
      &lt;message xmlns='jabber:client'
               xml:lang='en'
               to='test_slave!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
               id='17865558756670531820'>
        &lt;archived xmlns='urn:xmpp:mam:tmp'
                  by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                  id='1694192192173422'/>
        &lt;stanza-id xmlns='urn:xmpp:sid:0'
                   by='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
                   id='1694192192173422'/>
        &lt;body xml:lang='en'>5&lt;/body>
      &lt;/message>
      &lt;delay xmlns='urn:xmpp:delay'
             from='pgsql.localhost'
             stamp='2023-09-08T16:56:32.173422Z'/>
    &lt;/forwarded>
  &lt;/result>
&lt;/message>

#message{
 id = <<>>,type = normal,lang = <<>>,
 from =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,resource = <<>>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,lresource = <<>>},
 to =
  #jid{
   user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   server = <<"pgsql.localhost">>,
   resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
   luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
   lserver = <<"pgsql.localhost">>,
   lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
 subject = [],body = [],thread = undefined,
 sub_els =
  [#mam_result{
    xmlns = <<"urn:xmpp:mam:2">>,queryid = <<"3237477585357991854">>,
    id = <<"1694192192173422">>,
    sub_els =
     [#forwarded{
       delay =
        #delay{
         stamp = {1694,192192,173422},
         from =
          #jid{
           user = <<>>,server = <<"pgsql.localhost">>,resource = <<>>,
           luser = <<>>,lserver = <<"pgsql.localhost">>,lresource = <<>>},
         desc = <<>>},
       sub_els =
        [#xmlel{
          name = <<"message">>,
          attrs =
           [{<<"xmlns">>,<<"jabber:client">>},
            {<<"xml:lang">>,<<"en">>},
            {<<"to">>,
             <<"test_slave!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"from">>,
             <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost/resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
            {<<"id">>,<<"17865558756670531820">>}],
          children =
           [#xmlel{
             name = <<"archived">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:mam:tmp">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"stanza-id">>,
             attrs =
              [{<<"xmlns">>,<<"urn:xmpp:sid:0">>},
               {<<"by">>,
                <<"test_master!#$%^*()`~+-;_=[]{}|\\@pgsql.localhost">>},
               {<<"id">>,<<"1694192192173422">>}],
             children = []},
            #xmlel{
             name = <<"body">>,
             attrs = [{<<"xml:lang">>,<<"en">>}],
             children = [{xmlcdata,<<"5">>}]}]}]}]}],
 meta = #{}}
</pre></div>
<pre>

</pre>
<div class="default"><pre><b>*** User 2023-09-08 16:56:32.326 ***</b><a id=e-59230 class="link-to-entry" href="#e-59230">&#x1f517;</a>
RECV:
&lt;iq xml:lang='en'
    to='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost/resource!@#$%^&amp;*()&apos;&quot;`~&lt;&gt;+-/;:_=[]{}|\'
    from='test_master!#$%^*()`~+-;_=[]{}|\@pgsql.localhost'
    type='result'
    id='10108492427838770489'>
  &lt;fin xmlns='urn:xmpp:mam:2'
       complete='true'>
    &lt;set xmlns='http://jabber.org/protocol/rsm'>
      &lt;count>5&lt;/count>
      &lt;first>1694192192125906&lt;/first>
      &lt;last>1694192192173422&lt;/last>
    &lt;/set>
  &lt;/fin>
&lt;/iq>

#iq{id = <<"10108492427838770489">>,type = result,lang = <<"en">>,
    from =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,resource = <<>>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,lresource = <<>>},
    to =
        #jid{
            user = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            server = <<"pgsql.localhost">>,
            resource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>,
            luser = <<"test_master!#$%^*()`~+-;_=[]{}|\\">>,
            lserver = <<"pgsql.localhost">>,
            lresource = <<"resource!@#$%^&*()'\"`~<>+-/;:_=[]{}|\\">>},
    sub_els =
        [#mam_fin{
             xmlns = <<"urn:xmpp:mam:2">>,id = <<>>,
             rsm =
                 #rsm_set{
                     'after' = undefined,before = undefined,count = 5,
                     first =
                         #rsm_first{
                             index = undefined,data = <<"1694192192125906">>},
                     index = undefined,last = <<"1694192192173422">>,
                     max = undefined},
             stable = undefined,complete = true}],
    meta = #{}}
</pre></div>
<pre>
<a name="end"></a>


=== Ended at 2023-09-08 16:56:32
=== successfully completed test case
=== === Returned value: [{receiver,undefined},
                     {rosterver,true},
                     {sm,true},
                     {compression,[&lt;&lt;"zlib"&gt;&gt;]},
                     {stream_id,&lt;&lt;"17735386008032474001"&gt;&gt;},
                     {sasl,#Fun&lt;suite.6.122050307&gt;},
                     {legacy_auth,true},
                     {register,true},
                     {starttls,true},
                     {mechs,
                         [&lt;&lt;"DIGEST-MD5"&gt;&gt;,&lt;&lt;"PLAIN"&gt;&gt;,&lt;&lt;"SCRAM-SHA-512"&gt;&gt;,
                          &lt;&lt;"SCRAM-SHA-256"&gt;&gt;,&lt;&lt;"SCRAM-SHA-1"&gt;&gt;,
                          &lt;&lt;"X-OAUTH2"&gt;&gt;]},
                     {peer,
                         {jid,&lt;&lt;"test_slave!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"pgsql.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"test_slave!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"pgsql.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;}},
                     {peer_nick,
                         &lt;&lt;"slave_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {user,&lt;&lt;"test_master!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;},
                     {slave,
                         {jid,&lt;&lt;"test_slave!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"pgsql.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"test_slave!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"pgsql.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;}},
                     {master,
                         {jid,&lt;&lt;"test_master!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"pgsql.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"test_master!#$%^*()`~+-;_=[]{}|\\"&gt;&gt;,
                             &lt;&lt;"pgsql.localhost"&gt;&gt;,
                             &lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;}},
                     {resource,&lt;&lt;"resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {nick,&lt;&lt;"master_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {mode,master},
                     {watchdog,&lt;0.43359.0&gt;},
                     {event_relay,&lt;0.43350.0&gt;},
                     {server,&lt;&lt;"pgsql.localhost"&gt;&gt;},
                     {server_port,5222},
                     {server_host,"localhost"},
                     {component_port,5270},
                     {s2s_port,5269},
                     {master_nick,
                         &lt;&lt;"master_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {slave_nick,
                         &lt;&lt;"slave_nick!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {room_subject,
                         &lt;&lt;"hello, world!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {certfile,
                         "/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd/test/ejabberd_SUITE_data/cert.pem"},
                     {persistent_room,true},
                     {anonymous,false},
                     {type,client},
                     {xmlns,&lt;&lt;"jabber:client"&gt;&gt;},
                     {ns_stream,&lt;&lt;"http://etherx.jabber.org/streams"&gt;&gt;},
                     {stream_version,{1,0}},
                     {stream_from,&lt;&lt;&gt;&gt;},
                     {db_xmlns,&lt;&lt;&gt;&gt;},
                     {lang,&lt;&lt;"en"&gt;&gt;},
                     {base_dir,
                         "/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd"},
                     {pubsub_node,&lt;&lt;"node!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {pubsub_node_title,
                         &lt;&lt;"title!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {master_resource,
                         &lt;&lt;"master_resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {slave_resource,
                         &lt;&lt;"slave_resource!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {update_sql,false},
                     {password,&lt;&lt;"password!@#$%^&amp;*()'\"`~&lt;&gt;+-/;:_=[]{}|\\"&gt;&gt;},
                     {backends,[mnesia,redis,mysql,pgsql,sqlite,ldap,extauth]},
                     {tc_logfile,
                         "/home/runner/work/ejabberd/ejabberd/_build/test/logs/ct_run.1694191642@566-badlop-master-7522c29.2023-09-08_16.49.06/lib.ejabberd.logs/run.2023-09-08_16.49.07/ejabberd_suite.mam_query_rsm_max_master.38082.html"},
                     {tc_group_properties,[{name,mam_query_rsm_max},parallel]},
                     {tc_group_path,
                         [[{name,mam_master_slave},sequence],
                          [{name,pgsql},sequence]]},
                     {data_dir,
                         "/home/runner/work/ejabberd/ejabberd/_build/test/lib/ejabberd/test/ejabberd_SUITE_data/"},
                     {priv_dir,
                         "/home/runner/work/ejabberd/ejabberd/_build/test/logs/ct_run.1694191642@566-badlop-master-7522c29.2023-09-08_16.49.06/lib.ejabberd.logs/run.2023-09-08_16.49.07/log_private/"}]
